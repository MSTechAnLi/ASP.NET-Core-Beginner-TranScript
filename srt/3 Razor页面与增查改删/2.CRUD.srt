1
00:00:01,043 --> 00:00:07,123
Hey friends, we're glad you're still with us here at Microsoft Virtual Academy as we do our intro to ASP.NET Core.
大家好，很高兴你仍然关注我们微软虚拟学院，我们会继续介绍 ASP.NET Core

2
00:00:07,123 --> 00:00:09,672
We're learning all about razor pages and our application.
我们将继续学习关于 razor 页面和应用程序的内容

3
00:00:09,875 --> 00:00:12,371
-This module will be a little longer -Yes it will
-这模块将花比较长的时间去进行 -是的

4
00:00:12,371 --> 00:00:16,975
And it will probably have us making some mistakes together,and that's okay.
它可能会误导我们犯一些错误,但这没关系

5
00:00:17,257 --> 00:00:19,219
And we're gonna try not to hide anything from you.
我们要尽量不遗漏下任何东西

6
00:00:19,219 --> 00:00:24,339
We are following the documentation as we hope that are, and maybe you can follow along.
我们会跟着文档去一步步操作,你也要这么做，并且可能会花更长时间

7
00:00:24,339 --> 00:00:27,987
Pause, try stuff out, and maybe Google with Bing.
暂停一下,尝试去做,也许谷歌和必应一下是少不了的

8
00:00:28,051 --> 00:00:28,883
Google with Bing.
Google 和 Bing~

9
00:00:28,883 --> 00:00:30,547
If you have trouble and get stuck.
如果你有麻烦,卡住了

10
00:00:30,547 --> 00:00:34,323
Yeah, and we will have links to the documentation right underneath this recording.
没关系,我们可以通过链接到文档对下的内容去了解详情（这个要去官网看呦~）

11
00:00:34,323 --> 00:00:39,281
All right, so we're gonna try to make a CRUD page.
好吧,所以我们要试着做一个 CRUD 页面

12
00:00:39,281 --> 00:00:39,971
What is CRUD?
什么是 CRUD?

13
00:00:40,300 --> 00:00:45,777
Create,read, update, delete.
创建、读取、更新、删除

14
00:00:45,777 --> 00:00:54,675
All right, so a CRUD application maps verbs from CRUD to verbs that we're used to using,like get is a get, so it would be like a read.
All right, so a CRUD application maps verbs from CRUD to verbs that we're used to using,like get is a get, so it would be like a read.

15
00:00:54,675 --> 00:00:57,358
And if you're gonna create something, it would be a post.
如果你要创造一些数据,这就要用到 post 请求

16
00:00:57,358 --> 00:01:06,126
So you'd fill out a form, you'd hit submit, and it would post the data, that's a create Then you can maybe read it back and look at in edit page or then maybe delete it.
当你在填写表格时,点击提交, post 请求将发送数据,经过一个创建过程后你可以在页面看到它,同样也可以编辑或删除

17
00:01:06,126 --> 00:01:12,718
So if we succeed, we'll have the simple form,maybe create some customers, put them in a fake database And we'll be okay
如果顺利的话,我们会通过简单的形式创造一些虚拟信息,并把它们放在一个假的数据库,我们有信心~

18
00:01:12,718 --> 00:01:16,625
Yeah, and I will be learning more about databases in the intermediate course as well
是的,我们以后将会学习更多关于数据库中间层的内容

19
00:01:16,625 --> 00:01:18,606
Yes,well like a whole section on databases.
是的,他就像一个数据库整体的一部分

20
00:01:18,606 --> 00:01:20,846
So for now, we're gonna be doing it in an in-memory database.
所以现在,我们会在内存中创建一个数据库

21
00:01:20,846 --> 00:01:23,598
Okay, so let's do the best we can.
好吧,让我们尽我们所能来做吧

22
00:01:23,598 --> 00:01:26,862
We're gonna use the same web application one that we created before.
我们将使用与之前创建的 web 应用相同的程序

23
00:01:26,862 --> 00:01:39,225
We saw in the previous modules where we added MVC, but of course all of that stuff was added for us because we went File > New Project,and we picked Web Application, all right?
我们看下之前的模块,我们添加了 MVC ,当然我们之所以这么做是因为我们通过 文件>新项目 ,选择了 Web 应用程序,对吧?

24
00:01:39,975 --> 00:01:44,782
So here in configure services, we've got AddMvc.
所以在配置服务,我们加上 AddMvc

25
00:01:44,782 --> 00:01:47,672
But we're gonna make our little in-memory database here.
但我们需要有一个小的内存数据库

26
00:01:48,000 --> 00:01:53,358
We're gonna say services.AddDbContext<>
我们在这里输入 services.AddDbContext<>

27
00:01:53,358 --> 00:01:55,150
Yeah, and give it name
好的，给它一个名字

28
00:01:55,150 --> 00:01:58,030
And we gonna create a thing called AppDbContext.
我们将创建一个名为 AppDbContext 的类

29
00:01:58,030 --> 00:01:59,630
We can name it whatever we want to.
我们可以把他命名成喜欢的名字

30
00:01:59,630 --> 00:02:02,638
We haven't written this yet, but we will.
我们还没有写这个,但我们以后会的 

31
00:02:02,638 --> 00:02:05,902
I'm gonna hit Ctrl+dot.
摁下 Ctrl + .

32
00:02:05,902 --> 00:02:10,382
And it's saying, hey, do you need an AppDbContext?
它会提示,嘿,你需要一个AppDbContext吗?

33
00:02:10,382 --> 00:02:12,878
Do you wanna go and generate one of those?
你要去生成一个吗?

34
00:02:12,878 --> 00:02:14,670
I wanna go ahead and say yes.
我们选择,是的

35
00:02:14,670 --> 00:02:18,190
So it's gone and done that, and we'll deal with that in a minute.
这样系统会去生成了,我们会在一分钟内处理掉它

36
00:02:18,190 --> 00:02:22,414
And again, I will very likely make mistakes, so you'll bear with me I hope.
我很有可能再次犯错误,所以我希望你能原谅我

37
00:02:22,414 --> 00:02:27,214
I opened up the parentheses there.
我在括号中添加内容

38
00:02:27,214 --> 00:02:28,942
And I'm gonna pass in some options.
我将通过一些选项

39
00:02:28,942 --> 00:02:35,470
-And the option I'm gonna pass in for my database context are options -UseInmemory.
-我要在 options 中进入数据库的上下文 -UseInmemory

40
00:02:35,470 --> 00:02:37,966
-Use -In.
-Use -In.

41
00:02:38,670 --> 00:02:40,270
MemoryDatabase.
MemoryDatabase.

42
00:02:40,462 --> 00:02:43,406
Yes, but the reason why that's not showing,that perfect.
是的,但这样写肯定是不完全的

43
00:02:43,406 --> 00:02:44,942
-We need to add -why is that not showing up?
-我们需要添加 -为什么没有提示?

44
00:02:44,942 --> 00:02:47,806
So we need to add the entity framework.
所以我们需要添加 entity framework

45
00:02:47,806 --> 00:02:49,150
So we need to use
所以我们需要使用

46
00:02:49,150 --> 00:02:51,006
And I probably should have added that first, and
可能应该说是补充,第一点

47
00:02:51,006 --> 00:02:52,158
I would have gotten IntelliSense.
我们利用智能感知

48
00:02:52,158 --> 00:02:53,758
-True -Let's try that.
-尝试 -让我们试一下

49
00:02:53,758 --> 00:02:56,254
If we go back up to the top.
如果我们回去了

50
00:03:00,222 --> 00:03:02,590
So we add the EntityFrameworkCore beforehand.
所以我们事先添加 Entity Framework Core

51
00:03:06,300 --> 00:03:11,614
Look, you see that little arrow there that's pointing down?
看,你看到那个向下的小箭头?

52
00:03:12,350 --> 00:03:19,166
That means that this method came in was included by the fact that we just did that UseIn.
 这意味着,该方法包括了我们刚才添加进来的 UseIn

53
00:03:19,625 --> 00:03:22,425
That's called an extension method,it's along for the ride.
这是一个扩展方法,它在其中

54
00:03:23,070 --> 00:03:26,334
And you see it actually says extension,that wasn't there seconds ago
你看它实际就是一个拓展，那不是几秒钟之前的事

55
00:03:26,334 --> 00:03:27,614
No, it wasn't.
不,它不是

56
00:03:27,934 --> 00:03:37,406
Add InMemoryDatabase, some name All right,And then we look at the squiggle and we worry.
添加 InMemoryDatabase 的名字,下面有一个曲线，真叫人担心

57
00:03:37,406 --> 00:03:39,582
Does the squiggle mean something?
下划线的意思是什么？

58
00:03:41,600 --> 00:03:43,550
So, here it's saying AddDbContext.
所以,这里是说 AddDbContext

59
00:03:43,550 --> 00:03:45,598
Well, we never really went and did anything with that AddDbContext.
好吧,我们从没有真正去引用 AddDbContext。

60
00:03:45,598 --> 00:03:48,158
Let's go over there and fix that,I'm gonna right click and say go to definition.
我们去修复吧,点击右键去自定义

61
00:03:49,700 --> 00:03:51,294
And let's work on our database context.
让我们搭建一个数据库环境

62
00:03:51,294 --> 00:03:55,134
This is kind of standard stuff, so don't worry about it too much.
这是有标准对应的东西,所以不要担心太多

63
00:03:55,134 --> 00:03:58,206
But basically this is representing the database.
但基本上这是代表数据库 

64
00:03:59,486 --> 00:04:01,278
I'm hitting Ctrl+dot there.
我现在摁下 Ctrl+.

65
00:04:01,925 --> 00:04:07,900
And I'll say make it an AppDbContext,this is an constructor, all right?
我会让它成为 AppDbContext ,这是一个构造函数,对吧?

66
00:04:08,225 --> 00:04:14,078
Okay, and we're gonna take in some options.
好的,我们会通过一些选项

67
00:04:17,950 --> 00:04:22,375
-ContextOptions,Oops, optoons -Options?
-ContextOptions optoons -Options?

68
00:04:22,375 --> 00:04:27,011
Options, pass up to the base class those options.
options ,通过 options 的基类

69
00:04:27,011 --> 00:04:28,419
I'm gonna put that.
我要把它

70
00:04:29,075 --> 00:04:33,150
What I'm trying to zoom and make it helpful for you, I end up making it worse for myself.
我想放的更大一点,让你能看清楚,但是那样我自己就很难受了

71
00:04:34,238 --> 00:04:36,675
Well, at least you have other people in mind.
好吧,至少你有别人

72
00:04:38,000 --> 00:04:41,278
-I do. And then -You have to set it of some sort.
-我这么做了 -你必须这么设置它

73
00:04:41,278 --> 00:04:45,054
We have a set of, we're gonna say customers?
我们要设置，我们怎么命名？

74
00:04:45,118 --> 00:04:46,684
So we have a set of customer.
我们命名为 Customer

75
00:04:46,684 --> 00:04:47,900
Customer does not exist here.
Customer 并不存在

76
00:04:47,900 --> 00:04:49,576
That's why it's squiggled out.
这就是为什么会出现下划线

77
00:04:50,075 --> 00:04:54,393
And then we do a getter, setter, get ; set, okay?
然后我们做一个控制器和访问器,好吗?

78
00:04:54,648 --> 00:04:56,248
Customer is squiggled out.
Customer 出现波浪线了

79
00:04:56,248 --> 00:04:59,192
The type or namespace 'Customer' could not be found.
类型或命名空间 "Customer" 不存在

80
00:04:59,192 --> 00:05:01,560
Well, that's true cuz we haven't made one yet.
真相是我们还没有去做呢！

81
00:05:01,624 --> 00:05:02,648
We had not made it up.
我们没有做起来

82
00:05:02,648 --> 00:05:06,424
l could type control dot, but l am gonna click show potential fixes.
我可以给它控制类型,但我点击显示潜在的修复

83
00:05:07,300 --> 00:05:08,664
This is kind of interesting.
这是很有趣的

84
00:05:08,664 --> 00:05:11,224
Here it's saying, well, I can go and make customer for you.
这里显示,我可以去为你去创建 customer

85
00:05:11,224 --> 00:05:12,696
But look at this here.
但是看看这个

86
00:05:12,696 --> 00:05:18,392
It's suggesting other packages that have the word customer and the name customer in it.
建议其他的存在这个词和名称的包

87
00:05:18,392 --> 00:05:21,784
So these are other NuGet packages,packages up in the world.
在世界上有其他NuGet包

88
00:05:21,784 --> 00:05:22,744
Yeah, ain't that cool?
是的,这不是很棒吗?

89
00:05:22,744 --> 00:05:23,448
That's very cool.
这是非常酷的

90
00:05:23,448 --> 00:05:26,275
-Package out there that has the word customer in it -Has the word customer in it
-包里面有 "customer" 这个词 -有 "customer"  这个词吗？

91
00:05:26,275 --> 00:05:27,102
No, I don't want those.
不,我不想要这些

92
00:05:27,800 --> 00:05:37,464
But if I was doing something with JSON or doing something with some technology that I knew I will need the NuGet packages, later it will go get it for me.
但如果我通过 json 或其他一些技术,我知道我需要 NuGet 包,之后它就会把它给我

93
00:05:37,464 --> 00:05:40,792
So I'm gonna say generate in new file, that seems reasonable.
所以我要生成新的文件,似乎是合理的

94
00:05:40,792 --> 00:05:43,800
-It does -All right, this generated that.
-是的 -那么来生成它吧

95
00:05:43,800 --> 00:05:45,528
Now notice it just appeared.
现在注意到它就出现了

96
00:05:46,025 --> 00:05:52,225
-There it is -And now I'm gonna right click and say go to definition
-这是 -现在点击右键要去定义

97
00:05:52,516 --> 00:05:56,975
It is worth pointing out that I could also right click and say Peak Definition.
值得指出的是,我也可以右击然后选择 Peak Definition

98
00:05:56,975 --> 00:06:00,130
-And could you write in there? -I could.
-你可以写在这里吗? -可以啊

99
00:06:00,130 --> 00:06:01,225
I think that would be a little weird.
我觉得会有点奇怪

100
00:06:01,499 --> 00:06:10,300
But then I can click on this little tab right here Promote to Document, and now I've jumped into that document.
但我可以点击这个小标签在这里拓展窗口,现在我已经跳转进来了

101
00:06:10,300 --> 00:06:16,175
So I can peek and then if I type a little bit,I was like this is tiresome, then I could jump even higher.
我可以速览内容,如果我输入一点,我觉得这是烦人的,然后我可以跳得更高

102
00:06:16,175 --> 00:06:17,757
-That's pretty smooth. -It is pretty smooth.
-操作起来很流畅 -确实很舒服

103
00:06:17,821 --> 00:06:21,405
-All right, I'll show you another smooth tip. -I know it.
-好的,我将向你展示另一个提示方式 -我知道是什么

104
00:06:21,405 --> 00:06:24,413
-Yeah? You wanna suggest? -The tab tab thing?
-是吗，你有建议吗? -使用 tab tab

105
00:06:24,413 --> 00:06:27,741
-Yes, ready? -Prop Tab.
-是的,准备好了吗? -支持 tab

106
00:06:27,741 --> 00:06:36,325
Tab, tab int Tab Id Enter Enter prop Tab Tab string Enter Tab Name.
Tab, tab int Tab Id 回车 回车 prop Tab Tab string 回车 Tab Name

107
00:06:36,325 --> 00:06:40,480
-How cool is that? -It's cool, and I always forget to use it.
-这太酷了,不是吗? -是很酷,我总是忘记

108
00:06:40,480 --> 00:06:43,850
-You gotta use it,There's so much good stuff in there -I always forget to use it and it's awesome.
-你必须使用它,在里边有这么好用的东西 -我总是忘记使用它,它太棒了

109
00:06:43,850 --> 00:06:46,880
There's also propfull.
还有propfull

110
00:06:47,650 --> 00:06:50,080
-What does that do? -That gives you a backing variable.
-这做什么呢? -给你一个支持变量

111
00:06:50,080 --> 00:06:56,350
There's propa,which I don't know what it does but it's crazy.
还有 propa ,我不太知道,但它太疯狂了。

112
00:06:58,825 --> 00:07:02,750
There's propg for a getter with a private setter.
这个控制器有一个 get 和一个私有的 set

113
00:07:03,200 --> 00:07:04,225
Yeah, a bunch of stuff.
是的,很多东西

114
00:07:04,225 --> 00:07:07,624
Have you done a blog post on all the properties
你做了博客的所有属性

115
00:07:07,624 --> 00:07:10,312
There's a bunch of snippets,I could go all day.
有很多片段,我可以做一整天

116
00:07:10,312 --> 00:07:12,680
But I'm just gonna use prop for now.
但是现在我要用道具

117
00:07:12,680 --> 00:07:16,584
So this is customer, so customers have an ID,a unique ID.
这是客户,所以客户有一个ID、一个惟一的ID

118
00:07:16,584 --> 00:07:18,184
And they have a name.
他们有一个名称

119
00:07:18,184 --> 00:07:20,552
And they could probably have an email,they could have all these things.
他们可能有一个电子邮件,这些东西都有可能有

120
00:07:20,939 --> 00:07:24,392
We'll start with name for now, but should name have some constraints?
我们从名字开始,但名字应该有限制吗?

121
00:07:24,392 --> 00:07:28,040
It should,we have an idea of data annotation.
应该是有的,我们应该做一个数据的注释

122
00:07:28,040 --> 00:07:30,088
There's annotation on that data, yes.
有注释的数据,是的

123
00:07:30,088 --> 00:07:33,096
So one of the things is that you probably want someone to enter their name, right?
要做的事情中有一件事就是想让某人输入他们的名字,对吧?

124
00:07:33,096 --> 00:07:38,408
-We wanna force them. -We wanna force them, so we want to make sure it some sort of required, right?
我们想强迫他们，我们想强迫他们,所以我们要确保某种需要,对吗?

125
00:07:38,408 --> 00:07:43,656
So required, and I'm putting that as a notation here and I'm gonna hit Ctrl+dot, again.
所以需要我把这作为一个符号,点击 Ctrl+. 一下

126
00:07:43,656 --> 00:07:50,696
When you learn that these things exist and you're thinking about them rather than typing in all this stuff for the using,you're just gonna type required.
当你学习这些东西的存在和你思考他们而不是输入使用所有这些东西,你就需要类型

127
00:07:50,696 --> 00:07:54,600
Hit Ctrl+dot, and then hit Enter.
点击 Ctrl+. 然后回车

128
00:07:54,600 --> 00:08:00,296
Line 1 just appeared there And then we'll force the length as well.
1号线就出现了,然后我们也会迫使长度

129
00:08:00,296 --> 00:08:05,032
We'll be silly for a moment, we'll say a length of 10.
我想一会儿,设定长度为10吧

130
00:08:05,032 --> 00:08:06,824
That's not a very good length.
这不是一个很好的长度

131
00:08:06,824 --> 00:08:08,104
That is not a good length at all.
这不是一个合适的长度

132
00:08:08,104 --> 00:08:10,024
But that might allow us to do some validation later.
我们先用它做一些验证

133
00:08:10,024 --> 00:08:12,072
And then we'll change it to a longer length.
然后我们会改变它长的长度

134
00:08:12,072 --> 00:08:15,592
All right, so let's back up for a second and see what we did here.
好吧,让我们回到了第二个,看看我们在这里做什么

135
00:08:15,592 --> 00:08:20,520
So we have in our start up an InMemoryDatabase.
所以我们在启动一个 InMemoryDatabase

136
00:08:20,825 --> 00:08:22,824
Not a SQLserver or a.
没有 SQL Server

137
00:08:22,824 --> 00:08:25,256
Whatever just in memory database.
无论在内存数据库

138
00:08:25,256 --> 00:08:37,401
We have a beginnings of a customer, unique ID and a name Some annotations on it, and then a little class here that's kind of empty.
我们有一个客户开始,惟一 ID 和名称一些注释,然后一个小类,是空的

139
00:08:37,401 --> 00:08:43,850
That is our a list of customers and actually what's customer Singular here.
这是我们的 Customer 列表实际上这里的 Customer 有点奇怪

140
00:08:43,850 --> 00:08:45,578
-Yeah. -That should be customers.
-是的. -应该是客户

141
00:08:45,578 --> 00:08:49,375
-Okay, because, you have a set. -This is a set of customers.
-好吧,因为这必须要去设置 -这是客户的设置

142
00:08:49,375 --> 00:08:54,474
So the one thing, how are we going to see this information?
还有一件事,我们怎么看到这个信息?

143
00:08:54,474 --> 00:09:01,514
Well, we're going to need to probably put some in the database and then,once we have them in the database, list them out.
我们可能需要在数据库,然后放一些,一旦我们让他们在数据库列表中显示出来

144
00:09:01,514 --> 00:09:02,922
Like how are we going to visually see it?
我们如何直观地看到?

145
00:09:02,922 --> 00:09:05,610
Yeah, so there's a bit of a chicken and the egg problem there.
是的,像一个鸡和蛋的问题

146
00:09:05,610 --> 00:09:09,898
Do we make the listing page first and list them out?
首先我们做清单页面列表出来吗?

147
00:09:09,898 --> 00:09:12,202
But we really can't cuz we don't have any.
但我们不能，因为我们没有

148
00:09:12,202 --> 00:09:13,802
-You don't anything, yeah. -Or we make a create page first.
-我们啥都没有呀 -或者我们先做一个页面出来

149
00:09:13,802 --> 00:09:17,194
-So it's CRUD. -We'll do the C first, okay?
-这是 CRUD. -我们先把创建功能实现

150
00:09:17,194 --> 00:09:20,266
-So over in -The pages folder.
-所以在 -页面文件夹

151
00:09:20,266 --> 00:09:23,274
Pages, let's do create.
页面,我们来创建

152
00:09:23,274 --> 00:09:26,282
Now, we're not going to say new file like we did before.
现在,我们不会说像我们之前做的新文件

153
00:09:26,282 --> 00:09:29,546
No, you're going to create a new Razor Page or if you go to New File.
不,你要创建一个新的 Razor 页面或者如果你创建新文件

154
00:09:29,546 --> 00:09:30,954
Let me do that again.
让我做一遍

155
00:09:30,954 --> 00:09:34,026
Right click and I have two choices I have new.
右键点击和我有新有两个选择

156
00:09:34,026 --> 00:09:35,818
-And then. -Page or I can say item.
-然后 -页面或者说项目

157
00:09:35,818 --> 00:09:36,650
Yeah, New Item.
是的,新项目

158
00:09:36,650 --> 00:09:39,594
And they should be the option to pick Razor Page.
他们应该选择 Razor 页面的选项

159
00:09:39,594 --> 00:09:43,306
Right, so you got a couple different options here and this is all the different things that you could make.
对,所以你有几个不同的选项,这是你可以做的所有的事情

160
00:09:44,077 --> 00:09:56,685
I'm gonna go and right click and say add Razor page, and I wanna point out that I'm not gonna do it for this because it will be a little bit cheating but after we're all done, first, we make you suffer.
我要和右单击,添加 Razor 页面,我想指出,我不会做这个,因为它将一点欺骗但我们都完成后,首先,我们让你受苦

161
00:09:56,685 --> 00:09:59,053
And then we show you the easy way And then we show you the easy way
然后我们告诉你最简单的方法,然后我们告诉你最简单的方法

162
00:09:59,334 --> 00:10:07,462
We could create that model and say Razor page is using entity framework CRUD, and then it will then scaffold or generate.
我们可以创建模型和 Razor 页面 CRUD是使用实体框架,然后将支架或生成

163
00:10:07,462 --> 00:10:10,342
-Every single -All the hard parts that we're about to do.
-每一个 -所有困难的部分,我们要做的

164
00:10:10,342 --> 00:10:14,825
But it's more fun to do, no no,it's more fun to do it ourselves, don't you think?
但它更有趣,不不,是更有趣的做自己,你不觉得吗?

165
00:10:15,575 --> 00:10:17,958
-All right. -All right, lets do it ourselves.
-好吧 -好吧,让我们自己做吧

166
00:10:17,958 --> 00:10:20,006
People can fast forward if they don't like it.
People can fast forward if they don't like it.

167
00:10:21,900 --> 00:10:24,294
The page name would be create.
The page name would be create.

168
00:10:24,294 --> 00:10:26,854
Uh-huh, and then we're gonna use a layout, we saw that.
Uh-huh, and then we're gonna use a layout, we saw that.

169
00:10:26,854 --> 00:10:31,014
And then, here it says Generate PageModel,that's that code behind of that page model.
And then, here it says Generate PageModel,that's that code behind of that page model.

170
00:10:31,014 --> 00:10:34,075
We could say no and then do that in line, if we wanted to.
We could say no and then do that in line, if we wanted to.

171
00:10:35,375 --> 00:10:36,886
All right. So let's see if that works.
All right. So let's see if that works.

172
00:10:37,590 --> 00:10:39,425
Thinking, thinking, thinking.
Thinking, thinking, thinking.

173
00:10:39,900 --> 00:10:42,966
We're gonna watch in the right hand side here as create should appear.
We're gonna watch in the right hand side here as create should appear.

174
00:10:42,966 --> 00:10:45,590
And sticking well because it's doing quite a bit of scaffolding.
And sticking well because it's doing quite a bit of scaffolding.

175
00:10:45,654 --> 00:10:50,902
Well, it's scaffolding up some workforce but it's also gonna build the application to see if it still builds.
Well, it's scaffolding up some workforce but it's also gonna build the application to see if it still builds.

176
00:10:52,100 --> 00:10:54,422
And if it's running a scarf-folder.
And if it's running a scarf-folder.

177
00:10:54,422 --> 00:10:57,650
And scar folder is something that you can go on a nd read about and write your own if you feel like it.
And scar folder is something that you can go on a nd read about and write your own if you feel like it.

178
00:10:58,650 --> 00:10:59,875
So here we gotta create.
So here we gotta create.

179
00:11:00,374 --> 00:11:03,574
-So let's see what we have in there -Let's see it gives us a page
-So let's see what we have in there -Let's see it gives us a page

180
00:11:04,475 --> 00:11:17,525
It gave us a default model, a title, looks like a header, and then some validation scripts, and then presumably we can just start typing our pages or whatever.
It gave us a default model, a title, looks like a header, and then some validation scripts, and then presumably we can just start typing our pages or whatever.

181
00:11:17,525 --> 00:11:23,478
Let's look at the backend,It made a create model that has a get.
Let's look at the backend,It made a create model that has a get.

182
00:11:23,478 --> 00:11:26,422
So this is the function that happens when we get stuff.
So this is the function that happens when we get stuff.

183
00:11:26,422 --> 00:11:27,254
Okay.
Okay.

184
00:11:27,254 --> 00:11:30,198
All right, so we're gonna need to make form code.
All right, so we're gonna need to make form code.

185
00:11:30,262 --> 00:11:36,650
All right, so form that would have actually just one entry?
All right, so form that would have actually just one entry?

186
00:11:36,650 --> 00:11:41,974
Yeah, so we'll say enter your name, figure, all right.
Yeah, so we'll say enter your name, figure, all right.

187
00:11:41,974 --> 00:11:44,079
And who knows if this will work, again, we're gonna learn.
And who knows if this will work, again, we're gonna learn.

188
00:11:44,079 --> 00:11:48,431
Now, this is interesting, noticed that when I typed form Why is it in purple?
Now, this is interesting, noticed that when I typed form Why is it in purple?

189
00:11:48,431 --> 00:12:02,433
Turns purple, so that is a tag helper, this is some related elements that are gonna be on the server for processing so the server knows about purple elements, and ill do some processing of them.
Turns purple, so that is a tag helper, this is some related elements that are gonna be on the server for processing so the server knows about purple elements, and ill do some processing of them.

190
00:12:02,433 --> 00:12:12,545
Typically when you're in HTML, you have like a P tag or an image tag or div, and that's just strings that get sent off to the client.
Typically when you're in HTML, you have like a P tag or an image tag or div, and that's just strings that get sent off to the client.

191
00:12:12,929 --> 00:12:22,785
But when we're generating this stuff on the server side,there might be an opportunity for ASP.NET Core to improve it,to change it, to add stuff.
But when we're generating this stuff on the server side,there might be an opportunity for ASP.NET Core to improve it,to change it, to add stuff.

192
00:12:22,785 --> 00:12:24,385
So it knows about form.
So it knows about form.

193
00:12:24,385 --> 00:12:27,969
Form is a magic tag and we can go and type things like this,you see it says asp colon.
Form is a magic tag and we can go and type things like this,you see it says asp colon.

194
00:12:28,033 --> 00:12:33,281
Yeah, so is that indication that that is a tag helper or some sort of action?
Yeah, so is that indication that that is a tag helper or some sort of action?

195
00:12:33,281 --> 00:12:36,025
Right these things aren't html.
Right these things aren't html.

196
00:12:36,025 --> 00:12:37,569
-No -Those are tag helpers
-No -Those are tag helpers

197
00:12:37,569 --> 00:12:43,265
You'll never see asp hyphen something being sent all the way out to the browser.
You'll never see asp hyphen something being sent all the way out to the browser.

198
00:12:43,265 --> 00:12:45,953
These are not HTML,They're hints to the server.
These are not HTML,They're hints to the server.

199
00:12:45,953 --> 00:12:52,225
So if when we run this application, and we go into the F12 tools, we will not see- You shouldn't see those.
So if when we run this application, and we go into the F12 tools, we will not see- You shouldn't see those.

200
00:12:52,225 --> 00:12:53,300
-Okay -Exactly
-Okay -Exactly

201
00:12:53,700 --> 00:12:58,750
-So we're gonna say form, this is gonna be basic method= a,yep see Get, post, put, delete
-So we're gonna say form, this is gonna be basic method= a,yep see Get, post, put, delete

202
00:12:58,750 --> 00:13:01,422
We'll say post So we're gonna go and post.
We'll say post So we're gonna go and post.

203
00:13:01,700 --> 00:13:02,761
Here's the end of our form.
Here's the end of our form.

204
00:13:03,200 --> 00:13:08,025
Say div, name, and then we'll need a text box.
Say div, name, and then we'll need a text box.

205
00:13:08,025 --> 00:13:09,313
Yep so some sort of input tag.
Yep so some sort of input tag.

206
00:13:09,313 --> 00:13:11,617
Yep input,Now, this is interesting.
Yep input,Now, this is interesting.

207
00:13:12,100 --> 00:13:17,441
We could do an input tag the way we usually do or we could say ASP.NET4.
We could do an input tag the way we usually do or we could say ASP.NET4.

208
00:13:17,441 --> 00:13:22,817
-Okay -And we're gonna say Customer.Name.
-Okay -And we're gonna say Customer.Name.

209
00:13:22,817 --> 00:13:25,313
-Okay -See how it's all purple?
-Okay -See how it's all purple?

210
00:13:26,050 --> 00:13:30,825
That ASP 4 is gonna look at that model, okay?
That ASP 4 is gonna look at that model, okay?

211
00:13:31,275 --> 00:13:34,950
Now, it's saying here, I don't know what a Customer is.
Now, it's saying here, I don't know what a Customer is.

212
00:13:35,875 --> 00:13:37,441
What's going on with that?
What's going on with that?

213
00:13:37,441 --> 00:13:38,465
It's never heard of Customer before.
It's never heard of Customer before.

214
00:13:38,875 --> 00:13:40,923
We'll come back and fix that in a second.
We'll come back and fix that in a second.

215
00:13:40,923 --> 00:13:45,225
Then we'll have an input for submitting that form, okay?
Then we'll have an input for submitting that form, okay?

216
00:13:45,225 --> 00:13:48,735
But we have a problem here,where it doesn't know what Customer is.
But we have a problem here,where it doesn't know what Customer is.

217
00:13:49,350 --> 00:13:51,625
What is the model for this page?
What is the model for this page?

218
00:13:53,050 --> 00:13:54,687
-Right, it's the -The Create
-Right, it's the -The Create

219
00:13:54,687 --> 00:13:57,275
CreateModel, so let's go look at that.
CreateModel, so let's go look at that.

220
00:13:58,225 --> 00:13:59,871
Peek into Definition, okay.
Peek into Definition, okay.

221
00:13:59,871 --> 00:14:01,343
I wanna point out how I'm moving around.
I wanna point out how I'm moving around.

222
00:14:01,343 --> 00:14:05,300
I'm right clicking and saying Go To Definition is also a hotkey for that.
I'm right clicking and saying Go To Definition is also a hotkey for that.

223
00:14:05,758 --> 00:14:11,839
So this is an important reminder, just as a programmer,you don't wanna necessarily find yourself going over and looking around all the files all the time.
So this is an important reminder, just as a programmer,you don't wanna necessarily find yourself going over and looking around all the files all the time.

224
00:14:11,839 --> 00:14:14,719
-You can navigate -To it, right?
-You can navigate -To it, right?

225
00:14:14,719 --> 00:14:17,750
To it directly, you can navigate logically, as they say.
To it directly, you can navigate logically, as they say.

226
00:14:18,559 --> 00:14:21,183
-Okay, all right. -Did you?
-Okay, all right. -Did you?

227
00:14:21,183 --> 00:14:23,871
-Cut something out from -Yeah
-Cut something out from -Yeah

228
00:14:23,871 --> 00:14:25,855
-Okay -Great.
-Okay -Great.

229
00:14:25,855 --> 00:14:28,275
-There we go -I cut out CreateModel, thank you.
-There we go -I cut out CreateModel, thank you.

230
00:14:28,550 --> 00:14:36,725
Right so, our create model is gonna need to know about customers, because that's gonna show up on the page.
Right so, our create model is gonna need to know about customers, because that's gonna show up on the page.

231
00:14:36,982 --> 00:14:39,675
So public Customer, that's a type.
So public Customer, that's a type.

232
00:14:40,302 --> 00:14:42,990
-That's a name -You can tell by the color.
-That's a name -You can tell by the color.

233
00:14:42,990 --> 00:14:44,334
It's a little confusing.
It's a little confusing.

234
00:14:44,334 --> 00:14:49,390
But, the property is called Customer, and the type is called Customer.
But, the property is called Customer, and the type is called Customer.

235
00:14:49,800 --> 00:14:59,822
And, this is going to need that database context,so we are going to make a little Database here.
And, this is going to need that database context,so we are going to make a little Database here.

236
00:14:59,822 --> 00:15:03,982
And this is just being the voice of the person doing this at home.
And this is just being the voice of the person doing this at home.

237
00:15:03,982 --> 00:15:07,725
Why have you made it private read only?
Why have you made it private read only?

238
00:15:08,525 --> 00:15:09,934
So that's a great point.
So that's a great point.

239
00:15:09,998 --> 00:15:16,782
I don't want people who get a hold of create model to be poking around and talking directly to the database.
I don't want people who get a hold of create model to be poking around and talking directly to the database.

240
00:15:16,782 --> 00:15:21,774
So, it's gonna be private, just for me where me is CreateModel.
So, it's gonna be private, just for me where me is CreateModel.

241
00:15:21,774 --> 00:15:27,790
And it's read only which means I'm gonna assign it once, and I don't want anyone to touch it after that.
And it's read only which means I'm gonna assign it once, and I don't want anyone to touch it after that.

242
00:15:27,790 --> 00:15:32,590
-Yeah. Okay -So I'm making it just for me and making sure I can't mess with it afterwards.
-Yeah. Okay -So I'm making it just for me and making sure I can't mess with it afterwards.

243
00:15:33,600 --> 00:15:34,894
Excellent, excellent question.
Excellent, excellent question.

244
00:15:35,875 --> 00:15:41,934
-So then, we'll make our -CreateModel Our constructor.
-So then, we'll make our -CreateModel Our constructor.

245
00:15:43,662 --> 00:15:46,350
And remember how dependency injection works.
And remember how dependency injection works.

246
00:15:46,350 --> 00:15:49,422
We don't make an AppDbContext we ask for one.
We don't make an AppDbContext we ask for one.

247
00:15:49,742 --> 00:15:55,054
We ask for it by putting it in our constructor.
We ask for it by putting it in our constructor.

248
00:15:55,118 --> 00:15:58,638
We can have as many of these as we want,We can have food and bar, etc, etc, etc.
We can have as many of these as we want,We can have food and bar, etc, etc, etc.

249
00:15:58,975 --> 00:16:00,366
This is the one we want for now.
This is the one we want for now.

250
00:16:01,125 --> 00:16:06,391
And then I'm just going to say hey, this one equals this one.
And then I'm just going to say hey, this one equals this one.

251
00:16:06,391 --> 00:16:09,655
I'm going to squirrel it away and hang onto it, so now I've got one.
I'm going to squirrel it away and hang onto it, so now I've got one.

252
00:16:12,700 --> 00:16:16,425
So that says there's this database, and I want to know about it.
So that says there's this database, and I want to know about it.

253
00:16:17,050 --> 00:16:20,206
This says there's a customer.
This says there's a customer.

254
00:16:20,206 --> 00:16:29,934
If I go back over to create, I can hover over that and see it's getting me probably IntelliSense too.
If I go back over to create, I can hover over that and see it's getting me probably IntelliSense too.

255
00:16:29,934 --> 00:16:31,662
Yep, see. Now, it is.
Yep, see. Now, it is.

256
00:16:31,662 --> 00:16:36,654
So, it knows about customer because it's hanging off of the model.
So, it knows about customer because it's hanging off of the model.

257
00:16:37,870 --> 00:16:40,110
So as we're running the application.
So as we're running the application.

258
00:16:40,110 --> 00:16:45,486
Technically, I should be able to go to this page,hover over customer name and see what names we've put in there?
Technically, I should be able to go to this page,hover over customer name and see what names we've put in there?

259
00:16:45,486 --> 00:16:48,942
You should be able to click on that,you should be able to have IntelliSense.
You should be able to click on that,you should be able to have IntelliSense.

260
00:16:48,942 --> 00:16:54,958
If you did a break point,you should be able to stop in here at some point and look at that, and we'll do that in a little bit.
If you did a break point,you should be able to stop in here at some point and look at that, and we'll do that in a little bit.

261
00:16:55,675 --> 00:17:01,422
What we need, though, is we need to bind this form.
What we need, though, is we need to bind this form.

262
00:17:01,422 --> 00:17:04,686
We're saying this input for customer name.
We're saying this input for customer name.

263
00:17:04,686 --> 00:17:10,830
When I hit submit, we need to catch it on the server side.
When I hit submit, we need to catch it on the server side.

264
00:17:10,830 --> 00:17:13,070
I call it surviving the journey.
I call it surviving the journey.

265
00:17:13,070 --> 00:17:14,414
Okay. Yeah, it's a good point.
Okay. Yeah, it's a good point.

266
00:17:14,414 --> 00:17:15,310
It does need to survive the journey.
It does need to survive the journey.

267
00:17:15,310 --> 00:17:17,038
So I'm gonna get rid of this OnGet here.
So I'm gonna get rid of this OnGet here.

268
00:17:17,038 --> 00:17:18,574
So we're gonna do a post.
So we're gonna do a post.

269
00:17:19,470 --> 00:17:21,902
You can say OnPost.
You can say OnPost.

270
00:17:22,414 --> 00:17:26,550
You could do it like this but the right way to do it is like this.
You could do it like this but the right way to do it is like this.

271
00:17:27,425 --> 00:17:36,238
-Async? -Async, which means don't block, and we're gonna have a task that returns some action.
-Async? -Async, which means don't block, and we're gonna have a task that returns some action.

272
00:17:36,238 --> 00:17:41,806
We might be doing something after this and I'm gonna say on OnPostAsync.
We might be doing something after this and I'm gonna say on OnPostAsync.

273
00:17:48,750 --> 00:17:50,885
And it's giving me a little complaint here saying!
And it's giving me a little complaint here saying!

274
00:17:51,293 --> 00:17:53,789
You didn't do a wait and you haven't returned a value.
You didn't do a wait and you haven't returned a value.

275
00:17:53,789 --> 00:17:59,805
Code paths, not all code paths return a value.
Code paths, not all code paths return a value.

276
00:17:59,805 --> 00:18:01,405
That's cuz we haven't done anything yet.
That's cuz we haven't done anything yet.

277
00:18:02,365 --> 00:18:08,125
So, when someone posts back, they hit submit,and it posts back to here.
So, when someone posts back, they hit submit,and it posts back to here.

278
00:18:08,573 --> 00:18:11,350
We would really like customer to have stuff in it.
We would really like customer to have stuff in it.

279
00:18:11,350 --> 00:18:14,845
-Yes -And so there's a couple things here.
-Yes -And so there's a couple things here.

280
00:18:14,845 --> 00:18:18,975
And then we need to make sure that the state of that model is valid, that someone hasn't messed with it.
And then we need to make sure that the state of that model is valid, that someone hasn't messed with it.

281
00:18:19,450 --> 00:18:30,280
So I'm gonna say if ModelState.IsValid,or if it's not, pardon me- I was about to say something.
So I'm gonna say if ModelState.IsValid,or if it's not, pardon me- I was about to say something.

282
00:18:30,280 --> 00:18:36,168
No I appreciate that,Then return the page back to itself to say now I'm done.
No I appreciate that,Then return the page back to itself to say now I'm done.

283
00:18:36,168 --> 00:18:43,016
If I hover over page you can see it returns a page result,which is a kind of action.
If I hover over page you can see it returns a page result,which is a kind of action.

284
00:18:43,016 --> 00:18:44,600
Returning a page is an action.
Returning a page is an action.

285
00:18:45,750 --> 00:18:50,696
If we get this far, now I'm gonna say db,remember when I say db?
If we get this far, now I'm gonna say db,remember when I say db?

286
00:18:50,696 --> 00:18:52,040
-Yes -What is db?
-Yes -What is db?

287
00:18:52,040 --> 00:18:58,440
It is a applicationDB context.
It is a applicationDB context.

288
00:18:58,504 --> 00:19:01,832
In there is customers, plural.
In there is customers, plural.

289
00:19:01,832 --> 00:19:04,072
-And we want to add one. -.Add()
-And we want to add one. -.Add()

290
00:19:04,136 --> 00:19:08,040
We'll pass in the customer that we just got handed.
We'll pass in the customer that we just got handed.

291
00:19:09,200 --> 00:19:13,160
And then we'll say, hang out for a minute, await.
And then we'll say, hang out for a minute, await.

292
00:19:14,500 --> 00:19:20,328
And we'll say, db.SaveChanges,And async means don't wait
And we'll say, db.SaveChanges,And async means don't wait

293
00:19:21,425 --> 00:19:26,152
Then we will go and return,not a page, because we're on the create page.
Then we will go and return,not a page, because we're on the create page.

294
00:19:26,152 --> 00:19:28,264
We really wanna return to the list.
We really wanna return to the list.

295
00:19:28,264 --> 00:19:29,736
Yeah, so you're doing a redirect?
Yeah, so you're doing a redirect?

296
00:19:29,736 --> 00:19:31,976
We're gonna do a redirect, exactly.
We're gonna do a redirect, exactly.

297
00:19:32,325 --> 00:19:35,950
And we haven't got a place to go yet,But we'll say redirect to page
And we haven't got a place to go yet,But we'll say redirect to page

298
00:19:36,264 --> 00:19:41,675
Okay. And you can see that there's options like redirect to page permanent, which would be a 301.
Okay. And you can see that there's options like redirect to page permanent, which would be a 301.

299
00:19:41,675 --> 00:19:43,437
-Okay -Http 301
-Okay -Http 301

300
00:19:43,437 --> 00:19:48,875
We're gonna do a 302 because this is just a standard kind of redirect,Let's just say /Index
We're gonna do a 302 because this is just a standard kind of redirect,Let's just say /Index

301
00:19:48,875 --> 00:19:52,988
And I think we should probably just say /,but we'll see what happens.
And I think we should probably just say /,but we'll see what happens.

302
00:19:52,988 --> 00:19:56,999
If people wanted to learn more about 301s,302s, do you have any recommendations?
If people wanted to learn more about 301s,302s, do you have any recommendations?

303
00:19:56,999 --> 00:19:58,983
-The Internet. -Correct
-The Internet. -Correct

304
00:20:00,119 --> 00:20:01,479
I would search around for that kind of stuff.
I would search around for that kind of stuff.

305
00:20:01,479 --> 00:20:03,143
Ultimately look at the docs.
Ultimately look at the docs.

306
00:20:03,143 --> 00:20:12,679
-Yeah -But redirect to page is a standard thing and again if you hover over it, it says right there Status302Found.
-Yeah -But redirect to page is a standard thing and again if you hover over it, it says right there Status302Found.

307
00:20:12,679 --> 00:20:18,759
But if I said RedirectToPagePermanent.
But if I said RedirectToPagePermanent.

308
00:20:18,759 --> 00:20:19,975
We would change it?
We would change it?

309
00:20:19,975 --> 00:20:25,927
Change it to a 301, which would tell the search engine,don't ever come back here and ask me about this again.
Change it to a 301, which would tell the search engine,don't ever come back here and ask me about this again.

310
00:20:25,927 --> 00:20:28,423
Don't ever talk to me again go here.
Don't ever talk to me again go here.

311
00:20:28,423 --> 00:20:29,050
-All right -That's what that means
-All right -That's what that means

312
00:20:31,879 --> 00:20:35,137
I'm paranoid so anyway,you never wanna do that when you're doing database work.
I'm paranoid so anyway,you never wanna do that when you're doing database work.

313
00:20:35,137 --> 00:20:37,249
You always wanna be temporary, okay?
You always wanna be temporary, okay?

314
00:20:37,249 --> 00:20:41,729
Okay. All right, and if you really,really, really wanna upset your coworkers.
Okay. All right, and if you really,really, really wanna upset your coworkers.

315
00:20:41,729 --> 00:20:47,299
You could move your curly braces.
You could move your curly braces.

316
00:20:47,299 --> 00:20:48,000
Yeah.
Yeah.

317
00:20:48,475 --> 00:20:50,025
And do stuff like this.
And do stuff like this.

318
00:20:50,627 --> 00:20:57,027
And if you really wanna be possibly buggy,you could even do stuff like this.
And if you really wanna be possibly buggy,you could even do stuff like this.

319
00:20:59,900 --> 00:21:01,825
-Where that's all one line -Yeah?
-Where that's all one line -Yeah?

320
00:21:02,250 --> 00:21:05,411
But you might have other stuff that you wanna do.
But you might have other stuff that you wanna do.

321
00:21:05,411 --> 00:21:08,850
Okay. Some people that really bothers them, some people it doesn't.
Okay. Some people that really bothers them, some people it doesn't.

322
00:21:09,225 --> 00:21:10,979
For me- Does it bother you?
For me- Does it bother you?

323
00:21:10,979 --> 00:21:13,731
I kinda like it on one line if it's not that big of a deal.
I kinda like it on one line if it's not that big of a deal.

324
00:21:14,425 --> 00:21:20,003
You know what I mean,but as soon as you have an extra line then you're gonna go and undo it and take it apart.
You know what I mean,but as soon as you have an extra line then you're gonna go and undo it and take it apart.

325
00:21:20,003 --> 00:21:24,227
It's stylistic,so it's not really a best practice for someone to know of right now.
It's stylistic,so it's not really a best practice for someone to know of right now.

326
00:21:24,675 --> 00:21:28,579
No, for right now, I just think it's nice to have everything fit on one line like that.
No, for right now, I just think it's nice to have everything fit on one line like that.

327
00:21:28,579 --> 00:21:32,227
But using the curly mustaches.
But using the curly mustaches.

328
00:21:33,250 --> 00:21:37,325
Is curly braces,they look like a mustache if you turn your head.
Is curly braces,they look like a mustache if you turn your head.

329
00:21:37,325 --> 00:21:38,933
That's a best practice.
That's a best practice.

330
00:21:38,933 --> 00:21:43,059
It still gets us, that when people say curly braces, and I don't know what they're talking about
It still gets us, that when people say curly braces, and I don't know what they're talking about

331
00:21:43,059 --> 00:21:43,750
-What do you call them? -cuz I use brackets
-What do you call them? -cuz I use brackets

332
00:21:43,750 --> 00:21:44,902
You call them brackets?
You call them brackets?

333
00:21:44,902 --> 00:21:47,278
So you have brackets, curly brackets, square brackets, so.
So you have brackets, curly brackets, square brackets, so.

334
00:21:47,278 --> 00:21:49,600
-Scandalous -Okay
-Scandalous -Okay

335
00:21:50,094 --> 00:21:52,206
-You're fancy -That is pretty intense.
-You're fancy -That is pretty intense.

336
00:21:52,206 --> 00:21:56,814
-Yeah -Okay, now I'm going to put a break point here.
-Yeah -Okay, now I'm going to put a break point here.

337
00:21:56,814 --> 00:21:59,650
-Okay. And we'll see if this works -All right.
-Okay. And we'll see if this works -All right.

338
00:21:59,650 --> 00:22:01,422
It might very well not work.
It might very well not work.

339
00:22:03,275 --> 00:22:05,650
-Fingers crossed and toes -No, it's probably not gonna work
-Fingers crossed and toes -No, it's probably not gonna work

340
00:22:05,650 --> 00:22:07,634
Lower your expectations now.
Lower your expectations now.

341
00:22:09,593 --> 00:22:11,257
-All right -Okay.
-All right -Okay.

342
00:22:13,100 --> 00:22:14,457
This is in create, right?
This is in create, right?

343
00:22:14,457 --> 00:22:15,800
-So I have to hit /create -Yep
-So I have to hit /create -Yep

344
00:22:23,043 --> 00:22:23,875
Okay
Okay

345
00:22:31,000 --> 00:22:32,000
Did we bind it?
Did we bind it?

346
00:22:33,200 --> 00:22:35,715
-Yeah see what's happening? -Nothing.
-Yeah see what's happening? -Nothing.

347
00:22:35,715 --> 00:22:38,339
-No -And if we go and do a view source.
-No -And if we go and do a view source.

348
00:22:39,025 --> 00:22:41,795
-And you go to? -Okay.
-And you go to? -Okay.

349
00:22:41,859 --> 00:22:44,419
I just want to show the people the form first.
I just want to show the people the form first.

350
00:22:48,550 --> 00:22:51,779
Some things showed up on the input that's kinda cool.
Some things showed up on the input that's kinda cool.

351
00:22:55,107 --> 00:22:57,219
-That's kinda nice -That is
-That's kinda nice -That is

352
00:22:57,219 --> 00:22:58,755
We didn't type that, right, remember?
We didn't type that, right, remember?

353
00:22:58,755 --> 00:23:03,363
So we're getting stuff on the input that we did not expect,which is cool.
So we're getting stuff on the input that we did not expect,which is cool.

354
00:23:03,427 --> 00:23:05,667
I bet there's some request verification.
I bet there's some request verification.

355
00:23:05,667 --> 00:23:08,611
Yeah, they put a request verification token to keep people from tampering with our stuff.
Yeah, they put a request verification token to keep people from tampering with our stuff.

356
00:23:09,325 --> 00:23:12,625
There is your name=Customer.Name.
There is your name=Customer.Name.

357
00:23:12,963 --> 00:23:15,587
And it generated an id for us as well.
And it generated an id for us as well.

358
00:23:16,355 --> 00:23:18,083
But you can see that nothing's happening.
But you can see that nothing's happening.

359
00:23:20,195 --> 00:23:28,140
On Customer, actually I wanna put a break point a little higher up, and then I'll explain to you what's going on.
On Customer, actually I wanna put a break point a little higher up, and then I'll explain to you what's going on.

360
00:23:28,716 --> 00:23:31,020
Let's see if we can even get to the post.
Let's see if we can even get to the post.

361
00:23:33,836 --> 00:23:40,556
Okay, do a debug session again /create.
Okay, do a debug session again /create.

362
00:23:47,575 --> 00:23:49,414
So I would've expected.
So I would've expected.

363
00:23:49,750 --> 00:23:54,606
-To hit that break point -To hit that break point, so that's concerning.
-To hit that break point -To hit that break point, so that's concerning.

364
00:23:57,840 --> 00:24:13,072
But I know that I need to say BindProperty on the customer which is to tell it I want this customer object filled out with the form information, right?
But I know that I need to say BindProperty on the customer which is to tell it I want this customer object filled out with the form information, right?

365
00:24:13,072 --> 00:24:15,376
-Yeah. -And right now I don't have that.
-Yeah. -And right now I don't have that.

366
00:24:17,040 --> 00:24:22,352
So let's take a look, and try this again.
So let's take a look, and try this again.

367
00:24:22,352 --> 00:24:32,175
The customer is gonna get created and filled up with information bound to those form fields.
The customer is gonna get created and filled up with information bound to those form fields.

368
00:24:35,250 --> 00:24:39,925
If that doesn't work then I've forgotten something and we will go and have a little debugging which will be fun as well.
If that doesn't work then I've forgotten something and we will go and have a little debugging which will be fun as well.

369
00:24:46,864 --> 00:24:51,728
They say the definition of insanity is doing the same thing over and over and expecting a different result.
They say the definition of insanity is doing the same thing over and over and expecting a different result.

370
00:24:51,728 --> 00:24:54,352
So let's take a look.
So let's take a look.

371
00:24:54,352 --> 00:24:56,272
It's probably something obvious.
It's probably something obvious.

372
00:24:59,408 --> 00:25:03,625
So we've got a form, we've got our input, we've got our method.
So we've got a form, we've got our input, we've got our method.

373
00:25:04,272 --> 00:25:06,704
I said post, does it matter if it's all caps?
I said post, does it matter if it's all caps?

374
00:25:07,856 --> 00:25:09,328
That would be odd if it did.
That would be odd if it did.

375
00:25:14,384 --> 00:25:15,792
So it doesn't matter.
So it doesn't matter.

376
00:25:17,392 --> 00:25:23,920
The tag helper exists already in view imports,the form is there.
The tag helper exists already in view imports,the form is there.

377
00:25:23,920 --> 00:25:28,272
The only thing l didn't add is the validation summary, okay?
The only thing l didn't add is the validation summary, okay?

378
00:25:37,103 --> 00:25:44,719
-Okay -All right, so l am putting in a long name, Fancy Pants, and nothing's happening.
-Okay -All right, so l am putting in a long name, Fancy Pants, and nothing's happening.

379
00:25:44,783 --> 00:25:57,625
-No -No, and am realizing that I've got my form with my input for customer name,but I put my validation summary outside the form.
-No -No, and am realizing that I've got my form with my input for customer name,but I put my validation summary outside the form.

380
00:25:57,625 --> 00:26:02,553
-Okay -So I am gonna put it inside the form,cuz it's validating the form.
-Okay -So I am gonna put it inside the form,cuz it's validating the form.

381
00:26:02,975 --> 00:26:15,519
And then I'm gonna hit Refresh, Fancy Pants, see and it says the Field Name, must be a string with maximum length of 10.
And then I'm gonna hit Refresh, Fancy Pants, see and it says the Field Name, must be a string with maximum length of 10.

382
00:26:15,519 --> 00:26:20,383
I'm getting that validation for free, right?
I'm getting that validation for free, right?

383
00:26:20,383 --> 00:26:22,111
And where did that 10 come from?
And where did that 10 come from?

384
00:26:24,159 --> 00:26:27,871
We set it in, yep, right there.
We set it in, yep, right there.

385
00:26:27,935 --> 00:26:29,279
We set it right there.
We set it right there.

386
00:26:29,279 --> 00:26:33,695
So maybe we'll change that to like 25, or something like that.
So maybe we'll change that to like 25, or something like that.

387
00:26:33,695 --> 00:26:38,495
Some people have really long names like in my country who have names which are 50, so maybe 100?
Some people have really long names like in my country who have names which are 50, so maybe 100?

388
00:26:38,495 --> 00:26:40,991
I'll make 49 and then that one 50 person,they're gonna suffer.
I'll make 49 and then that one 50 person,they're gonna suffer.

389
00:26:41,600 --> 00:26:45,000
-Man -inclusion. But the point is it's driven by
-Man -inclusion. But the point is it's driven by

390
00:26:45,275 --> 00:26:46,623
- By them -By them, okay?
- By them -By them, okay?

391
00:26:46,623 --> 00:26:52,959
And then one other thing- So it'd be the same if someone did entered something that wasn't an email, right?
And then one other thing- So it'd be the same if someone did entered something that wasn't an email, right?

392
00:26:52,959 --> 00:27:01,279
Yeah, it could be an email, it could be,you can put in validation information however you want,and you could even put in custom, regular expressions, or even write your own custom validators.
Yeah, it could be an email, it could be,you can put in validation information however you want,and you could even put in custom, regular expressions, or even write your own custom validators.

393
00:27:01,279 --> 00:27:02,751
So they could be as sophisticated as you want.
So they could be as sophisticated as you want.

394
00:27:02,751 --> 00:27:09,215
-Okay -You could also, I believe, say, I want a span.
-Okay -You could also, I believe, say, I want a span.

395
00:27:09,279 --> 00:27:18,303
And say asp-validation-for, and you could go and do a field by field validation, okay.
And say asp-validation-for, and you could go and do a field by field validation, okay.

396
00:27:18,751 --> 00:27:26,303
So here I'm saying this is my summary of all the different things, this is a specific validation for Customer Name.
So here I'm saying this is my summary of all the different things, this is a specific validation for Customer Name.

397
00:27:27,375 --> 00:27:36,725
Okay, let's see what that looks like And that might look a little different so if I come over here, come back over here and hit Refresh,oops I actually don't hit Refresh.
Okay, let's see what that looks like And that might look a little different so if I come over here, come back over here and hit Refresh,oops I actually don't hit Refresh.

398
00:27:36,725 --> 00:27:38,700
I need to run my app again cuz I stopped it.
I need to run my app again cuz I stopped it.

399
00:27:39,875 --> 00:27:40,835
Okay.
Okay.

400
00:27:43,907 --> 00:27:45,059
Run that again.
Run that again.

401
00:27:48,003 --> 00:27:48,899
Go to Create.
Go to Create.

402
00:27:50,051 --> 00:27:52,611
I think we made it really long this time, right?
I think we made it really long this time, right?

403
00:27:54,723 --> 00:27:59,651
And I tab away and it says it must be a string with a maximum length of 49.
And I tab away and it says it must be a string with a maximum length of 49.

404
00:28:00,227 --> 00:28:00,675
Okay.
Okay.

405
00:28:01,443 --> 00:28:07,011
But I like the main validation stuff so we'll leave that like that, okay?
But I like the main validation stuff so we'll leave that like that, okay?

406
00:28:07,971 --> 00:28:18,723
Now, let's go back to our break points and run our debugger this time, and see if we can see the customer get found.
Now, let's go back to our break points and run our debugger this time, and see if we can see the customer get found.

407
00:28:18,723 --> 00:28:19,491
Okay.
Okay.

408
00:28:20,850 --> 00:28:29,411
We had looked in the F12 developer tools before,we could see what's happening on the wire.
We had looked in the F12 developer tools before,we could see what's happening on the wire.

409
00:28:29,411 --> 00:28:33,315
This is a good way to kinda just see what's happening as you do your posts.
This is a good way to kinda just see what's happening as you do your posts.

410
00:28:34,339 --> 00:28:38,243
-So when you're looking, so you went to Developer Tools -Yeah. And the network?
-So when you're looking, so you went to Developer Tools -Yeah. And the network?

411
00:28:38,243 --> 00:28:40,099
I went to dot dot dot Developer Tools and we're under Network.
I went to dot dot dot Developer Tools and we're under Network.

412
00:28:40,099 --> 00:28:48,900
Okay. I will go and probably and clear it out, and then we'll put in Maria, okay.
Okay. I will go and probably and clear it out, and then we'll put in Maria, okay.

413
00:28:48,900 --> 00:28:53,411
Yep, there we go, so if you hover over that.
Yep, there we go, so if you hover over that.

414
00:28:53,475 --> 00:29:02,051
If we hover over Customer, see,because customer has a name.
If we hover over Customer, see,because customer has a name.

415
00:29:02,051 --> 00:29:08,963
Yeah. Customer.name, and we name the field Customer.name, and we told it, hey,bind, we want you to participate.
Yeah. Customer.name, and we name the field Customer.name, and we told it, hey,bind, we want you to participate.

416
00:29:10,075 --> 00:29:12,775
You automatically showed up in there.
You automatically showed up in there.

417
00:29:12,775 --> 00:29:15,043
-Okay -And I can put a little pin there as well
-Okay -And I can put a little pin there as well

418
00:29:15,875 --> 00:29:23,171
If I was gonna do lots of debugging sessions,then I can keep you there as a post to note and watch customer name change over time.
If I was gonna do lots of debugging sessions,then I can keep you there as a post to note and watch customer name change over time.

419
00:29:23,171 --> 00:29:28,400
-That's a good one -We can go and see if the model state is valid, it is.
-That's a good one -We can go and see if the model state is valid, it is.

420
00:29:28,881 --> 00:29:33,790
-What is the green button, that's a play like -Yeah, go to that point.
-What is the green button, that's a play like -Yeah, go to that point.

421
00:29:34,400 --> 00:29:37,959
Play up to that point, and then stop.
Play up to that point, and then stop.

422
00:29:39,025 --> 00:29:42,574
So here, I'm gonna go and Add that customer to the database.
So here, I'm gonna go and Add that customer to the database.

423
00:29:42,574 --> 00:29:45,646
Save it to the database,which of course is an in-memory database.
Save it to the database,which of course is an in-memory database.

424
00:29:45,646 --> 00:29:52,401
And then we'll redirect Now we had put in slash, but I'm not sure that's gonna work.
And then we'll redirect Now we had put in slash, but I'm not sure that's gonna work.

425
00:29:52,401 --> 00:29:55,473
Should we should we see about their pages, just in case?
Should we should we see about their pages, just in case?

426
00:29:55,473 --> 00:29:56,325
-Yeah, see? -Okay.
-Yeah, see? -Okay.

427
00:29:56,325 --> 00:30:00,677
It's says no page / matches this value.
It's says no page / matches this value.

428
00:30:00,677 --> 00:30:02,252
So you have to give the specific name
So you have to give the specific name

429
00:30:02,252 --> 00:30:08,798
I need to say index, which was what our main page is here
I need to say index, which was what our main page is here

430
00:30:08,798 --> 00:30:10,654
So index, okay?
So index, okay?

431
00:30:11,934 --> 00:30:13,662
Now we'll confirm if that that works.
Now we'll confirm if that that works.

432
00:30:13,726 --> 00:30:22,366
I can hit F5 to go and debug, or I can hit Ctrl+F5,which I like to do, cuz it starts up a little faster,if I know that I'm not gonna do a debugging session.
I can hit F5 to go and debug, or I can hit Ctrl+F5,which I like to do, cuz it starts up a little faster,if I know that I'm not gonna do a debugging session.

433
00:30:23,774 --> 00:30:25,118
But this time you hit F5?
But this time you hit F5?

434
00:30:25,118 --> 00:30:27,102
I hit Ctrl+F5 to go faster.
I hit Ctrl+F5 to go faster.

435
00:30:28,382 --> 00:30:33,566
Okay, so it redirected me to index but of course I haven't done anything on index that's interesting yet.
Okay, so it redirected me to index but of course I haven't done anything on index that's interesting yet.

436
00:30:33,850 --> 00:30:35,294
That will be the next part, right.
That will be the next part, right.

437
00:30:35,294 --> 00:30:38,700
So you could also probably send a message saying
So you could also probably send a message saying

438
00:30:38,700 --> 00:30:40,670
I can say customer updated,or whatever.
I can say customer updated,or whatever.

439
00:30:40,734 --> 00:30:43,486
But let's rip out this whole section here.
But let's rip out this whole section here.

440
00:30:43,486 --> 00:30:46,046
-Okay, very nice -And put a list of contents.
-Okay, very nice -And put a list of contents.

441
00:30:46,046 --> 00:30:47,326
-Okay -Is that cool?
-Okay -Is that cool?

442
00:30:49,075 --> 00:30:50,782
So where's our index?
So where's our index?

443
00:30:51,975 --> 00:30:54,558
So this is all this carousel and all this stuff.
So this is all this carousel and all this stuff.

444
00:30:54,558 --> 00:30:55,902
All the fancy bootstrap.
All the fancy bootstrap.

445
00:30:55,966 --> 00:30:58,910
I'm gonna actually collect this.
I'm gonna actually collect this.

446
00:30:58,910 --> 00:31:00,446
And then you comment it out?
And then you comment it out?

447
00:31:00,446 --> 00:31:04,030
Actually, no, I'm just gonna be awesome and just like toss it.
Actually, no, I'm just gonna be awesome and just like toss it.

448
00:31:04,094 --> 00:31:12,800
Wow. Yeah, but this is a way,if you wanna go hunting for the other side of the div,you can just fold these up, see that this matches this.
Wow. Yeah, but this is a way,if you wanna go hunting for the other side of the div,you can just fold these up, see that this matches this.

449
00:31:13,769 --> 00:31:17,545
Fold it up, select over it and toss it.
Fold it up, select over it and toss it.

450
00:31:21,001 --> 00:31:22,537
Cool, all right.
Cool, all right.

451
00:31:22,537 --> 00:31:24,905
So let's make our form.
So let's make our form.

452
00:31:28,361 --> 00:31:31,433
And this will be on the index page, right?
And this will be on the index page, right?

453
00:31:31,433 --> 00:31:37,425
We'll have method="post", and this will be a table.
We'll have method="post", and this will be a table.

454
00:31:37,900 --> 00:31:39,564
All right.
All right.

455
00:31:40,450 --> 00:31:43,721
It's okay to use tables, if it is a table of data.
It's okay to use tables, if it is a table of data.

456
00:31:43,785 --> 00:31:47,650
So many people complain about tables being a bad idea.
So many people complain about tables being a bad idea.

457
00:31:48,000 --> 00:31:51,825
I think that's kind of funny,It's a table,It's okay to have a table.
I think that's kind of funny,It's a table,It's okay to have a table.

458
00:31:52,125 --> 00:31:56,192
So we'll have a head for our table, and we'll have our ID row.
So we'll have a head for our table, and we'll have our ID row.

459
00:31:57,920 --> 00:32:08,096
-Yep -Oops, and we'll have ID.
-Yep -Oops, and we'll have ID.

460
00:32:09,632 --> 00:32:14,675
Then we'll have Name, we don't really need to show the database ID but for now let's show it.
Then we'll have Name, we don't really need to show the database ID but for now let's show it.

461
00:32:15,475 --> 00:32:19,950
All right,So do you have to create a tbody, okay yeah,you're way ahead of me.
All right,So do you have to create a tbody, okay yeah,you're way ahead of me.

462
00:32:19,950 --> 00:32:22,048
No, it's okay. Table body
No, it's okay. Table body

463
00:32:22,048 --> 00:32:26,080
But now I need a row for each.
But now I need a row for each.

464
00:32:27,040 --> 00:32:33,900
So would you put it in the row, or would you,so I am presumed that you need to go for every contact within.
So would you put it in the row, or would you,so I am presumed that you need to go for every contact within.

465
00:32:33,900 --> 00:32:34,555
Exactly.
Exactly.

466
00:32:34,950 --> 00:32:40,352
So I'm gonna have like a FOR SOMETHING HERE.
So I'm gonna have like a FOR SOMETHING HERE.

467
00:32:40,416 --> 00:32:53,675
Then a couple of cells, table cells, and then maybe a, I don't know,like a link to edit and a delete button.
Then a couple of cells, table cells, and then maybe a, I don't know,like a link to edit and a delete button.

468
00:32:53,675 --> 00:32:54,507
Yeah.
Yeah.

469
00:32:54,800 --> 00:32:57,952
-Okay, you see how I'm kind of sketching it out -You're sketching it out
-Okay, you see how I'm kind of sketching it out -You're sketching it out

470
00:32:57,952 --> 00:32:59,448
-Okay. Wild -what's it called?
-Okay. Wild -what's it called?

471
00:32:59,448 --> 00:33:02,925
-Pseudocode or something? -Pseudocode,It's a little pseudocode here
-Pseudocode or something? -Pseudocode,It's a little pseudocode here

472
00:33:02,925 --> 00:33:04,050
So now I wanna say at.
So now I wanna say at.

473
00:33:04,525 --> 00:33:08,100
For each yeah. And this is a snippet-
For each yeah. And this is a snippet-

474
00:33:08,100 --> 00:33:20,096
-Yeah -Tab, Tab, and then I'm gonna say for each,contact, oops, contact in, in what?
-Yeah -Tab, Tab, and then I'm gonna say for each,contact, oops, contact in, in what?

475
00:33:20,096 --> 00:33:21,056
In Model.
In Model.

476
00:33:21,650 --> 00:33:23,232
Now where is our customers?
Now where is our customers?

477
00:33:24,768 --> 00:33:31,104
Okay, so remember before when we were doing our create model?
Okay, so remember before when we were doing our create model?

478
00:33:31,104 --> 00:33:34,752
We needed to have the customers come from somewhere.
We needed to have the customers come from somewhere.

479
00:33:34,752 --> 00:33:36,352
Yeah. Now we're in a totally different page.
Yeah. Now we're in a totally different page.

480
00:33:36,725 --> 00:33:38,100
Yeah, so we have to have the customers.
Yeah, so we have to have the customers.

481
00:33:38,100 --> 00:33:39,125
We have to have the customers, right?
We have to have the customers, right?

482
00:33:39,125 --> 00:33:41,075
Yeah. So I'm gonna just take a break here.
Yeah. So I'm gonna just take a break here.

483
00:33:42,112 --> 00:33:49,472
And I'm gonna jump over to the index model cuz we can't really make our table till we have a little bit more, okay?
And I'm gonna jump over to the index model cuz we can't really make our table till we have a little bit more, okay?

484
00:33:49,536 --> 00:33:59,520
And I'm gonna break a couple of cardinal rules that I'm gonna copy paste a little code,because I'm gonna need this similar app database.
And I'm gonna break a couple of cardinal rules that I'm gonna copy paste a little code,because I'm gonna need this similar app database.

485
00:33:59,520 --> 00:34:02,656
This app db context which is gonna save myself a moment of time here.
This app db context which is gonna save myself a moment of time here.

486
00:34:04,064 --> 00:34:08,736
So we've got our app context, right?
So we've got our app context, right?

487
00:34:08,736 --> 00:34:10,976
We're gonna have our index page model.
We're gonna have our index page model.

488
00:34:11,360 --> 00:34:15,904
Now before, when we create a customer,we create one customer.
Now before, when we create a customer,we create one customer.

489
00:34:16,288 --> 00:34:24,416
But here our model is different cuz we're gonna have a list of customers on this page, right?
But here our model is different cuz we're gonna have a list of customers on this page, right?

490
00:34:24,416 --> 00:34:25,504
So our model is different.
So our model is different.

491
00:34:25,952 --> 00:34:31,136
And we'll do a get and then a private set so that only we can set it.
And we'll do a get and then a private set so that only we can set it.

492
00:34:31,712 --> 00:34:40,736
-All right, and then, in the OnGet, We'll say OnGet -One line below, OnGetAsync, okay
-All right, and then, in the OnGet, We'll say OnGet -One line below, OnGetAsync, okay

493
00:34:42,450 --> 00:34:48,480
-OnGetAsync, right? -We're gonna load up customers.
-OnGetAsync, right? -We're gonna load up customers.

494
00:34:48,480 --> 00:34:49,568
Where do we get them from?
Where do we get them from?

495
00:34:50,075 --> 00:34:51,168
The database and this is right there.
The database and this is right there.

496
00:34:52,650 --> 00:34:54,525
We're getting them out of customers.
We're getting them out of customers.

497
00:34:54,525 --> 00:35:01,400
And then there's this other little bit of thing that you can add on to make things a little bit faster.
And then there's this other little bit of thing that you can add on to make things a little bit faster.

498
00:35:01,400 --> 00:35:05,875
You can say AsNoTracking.
You can say AsNoTracking.

499
00:35:08,808 --> 00:35:11,496
And I'll show you what that means in a second.
And I'll show you what that means in a second.

500
00:35:11,496 --> 00:35:16,609
And we're gonna turn these customers into a list of customers.
And we're gonna turn these customers into a list of customers.

501
00:35:16,609 --> 00:35:19,808
So we're chaining things together,we're saying give me these customers.
So we're chaining things together,we're saying give me these customers.

502
00:35:20,192 --> 00:35:24,032
And we're not gonna keep track of them changing.
And we're not gonna keep track of them changing.

503
00:35:24,032 --> 00:35:28,960
You see it says disabling change tracking is useful for read-only scenarios.
You see it says disabling change tracking is useful for read-only scenarios.

504
00:35:29,975 --> 00:35:37,400
Change tracking is watching like keeping a track of all the different things you could change so that you know how to make a database update.
Change tracking is watching like keeping a track of all the different things you could change so that you know how to make a database update.

505
00:35:37,925 --> 00:35:53,575
So if I had a list of customers, and I wanted to watch all of them and change their names, that would give the database system entity framework that we're gonna learn about later all the information it needs about how to only change the bits that change, how to only change the database.
So if I had a list of customers, and I wanted to watch all of them and change their names, that would give the database system entity framework that we're gonna learn about later all the information it needs about how to only change the bits that change, how to only change the database.

506
00:35:53,575 --> 00:35:58,976
But we're just getting a list, so we're gonna say, don't track these, just give me a list.
But we're just getting a list, so we're gonna say, don't track these, just give me a list.

507
00:35:58,976 --> 00:36:03,712
So customers, no tracking, give me a list, so that's cool.
So customers, no tracking, give me a list, so that's cool.

508
00:36:04,928 --> 00:36:07,424
And I think we'll leave that like that for now.
And I think we'll leave that like that for now.

509
00:36:07,744 --> 00:36:09,984
We'll go back over to index.
We'll go back over to index.

510
00:36:11,968 --> 00:36:17,591
And now that model, the page behind us has customers.
And now that model, the page behind us has customers.

511
00:36:17,591 --> 00:36:20,840
Look, customers shows up, see, which is nice.
Look, customers shows up, see, which is nice.

512
00:36:21,400 --> 00:36:24,950
So then I think I can put my tr in here.
So then I think I can put my tr in here.

513
00:36:26,280 --> 00:36:30,120
And I'm hoping, remember, I said contact, I should say customer.
And I'm hoping, remember, I said contact, I should say customer.

514
00:36:31,848 --> 00:36:43,944
Customer singular, foreach customer,that means that the customer variable is now available to me customer.Id.
Customer singular, foreach customer,that means that the customer variable is now available to me customer.Id.

515
00:36:46,025 --> 00:36:50,152
-Everything's connected -Yep, cool, let's try that.
-Everything's connected -Yep, cool, let's try that.

516
00:36:50,152 --> 00:36:53,550
Okay. And then we'll do the rest,cuz I don't know if this is gonna work yet.
Okay. And then we'll do the rest,cuz I don't know if this is gonna work yet.

517
00:36:55,550 --> 00:36:59,496
Now I'm using an in-memory database, so every time I run this, it's gonna go away.
Now I'm using an in-memory database, so every time I run this, it's gonna go away.

518
00:36:59,496 --> 00:37:01,352
So it's just a throw away database.
So it's just a throw away database.

519
00:37:01,352 --> 00:37:10,440
-I need to do better -I need to maybe make tests later, and I survived the journey.
-I need to do better -I need to maybe make tests later, and I survived the journey.

520
00:37:10,504 --> 00:37:16,000
-You did -Let's see, but as soon as I shut you down, it's gonna be gone.
-You did -Let's see, but as soon as I shut you down, it's gonna be gone.

521
00:37:16,000 --> 00:37:19,784
So if you refresh the page- You're here,you're still there, right?
So if you refresh the page- You're here,you're still there, right?

522
00:37:19,784 --> 00:37:22,920
You're there until I close it, until I close this browser.
You're there until I close it, until I close this browser.

523
00:37:23,375 --> 00:37:27,464
Or not if I close the browser, pardon me,until I stop the web server.
Or not if I close the browser, pardon me,until I stop the web server.

524
00:37:27,464 --> 00:37:33,032
-So, okay -Yeah, thanks, cool, so now we've got create.
-So, okay -Yeah, thanks, cool, so now we've got create.

525
00:37:33,825 --> 00:37:36,680
We should probably put a button down there at the bottom somewhere.
We should probably put a button down there at the bottom somewhere.

526
00:37:36,680 --> 00:37:49,224
We've got some validation, we've got our database,looking at our friends And this is doing a thing called Post Redirect Get.
We've got some validation, we've got our database,looking at our friends And this is doing a thing called Post Redirect Get.

527
00:37:49,875 --> 00:37:54,792
So I'm here, I hit a post, we do a redirect, and then we do a get, and then we would get this stuff here.
So I'm here, I hit a post, we do a redirect, and then we do a get, and then we would get this stuff here.

528
00:37:55,400 --> 00:37:57,800
So this is a PRG, Post Redirect Get.
So this is a PRG, Post Redirect Get.

529
00:37:57,800 --> 00:38:00,424
There's lots of articles on the Internet about that.
There's lots of articles on the Internet about that.

530
00:38:00,825 --> 00:38:05,608
Now let's make a link to theoretically go and edit these things.
Now let's make a link to theoretically go and edit these things.

531
00:38:05,608 --> 00:38:08,050
-Okay -And then we'll have a button for Delete.
-Okay -And then we'll have a button for Delete.

532
00:38:08,050 --> 00:38:10,994
These things don't exist on the backend yet,but we can- So yeah,so we don't have an edit page yet.
These things don't exist on the backend yet,but we can- So yeah,so we don't have an edit page yet.

533
00:38:10,994 --> 00:38:13,089
-We don't -Okay. We can make a link
-We don't -Okay. We can make a link

534
00:38:13,089 --> 00:38:14,753
Now I could go and put in a link, href.
Now I could go and put in a link, href.

535
00:38:14,753 --> 00:38:16,825
You've done this before a million times.
You've done this before a million times.

536
00:38:17,175 --> 00:38:21,857
And say /edit and then put in strings and stuff.
And say /edit and then put in strings and stuff.

537
00:38:21,857 --> 00:38:24,289
But remember we talked about how great tag helpers are.
But remember we talked about how great tag helpers are.

538
00:38:24,289 --> 00:38:34,721
-Yeah -What if we went and said asp-page and then we could go and say there's an edit page and then it would figure out what the URL would look like.
-Yeah -What if we went and said asp-page and then we could go and say there's an edit page and then it would figure out what the URL would look like.

539
00:38:34,721 --> 00:38:41,450
-Okay -All right, and then it could even express the route a certain way.
-Okay -All right, and then it could even express the route a certain way.

540
00:38:42,875 --> 00:38:44,775
And we'll talk about routes in a minute.
And we'll talk about routes in a minute.

541
00:38:46,325 --> 00:38:48,450
I think it's route-id.
I think it's route-id.

542
00:38:51,500 --> 00:38:53,729
And I think we called it customer.Id.
And I think we called it customer.Id.

543
00:38:53,729 --> 00:39:04,000
So it's gonna take that customer's id so we want to basically make a page that looks like /edit/2, /edit/3, right?
So it's gonna take that customer's id so we want to basically make a page that looks like /edit/2, /edit/3, right?

544
00:39:05,175 --> 00:39:11,075
And that's the route id that's gonna get added onto that.
And that's the route id that's gonna get added onto that.

545
00:39:11,075 --> 00:39:13,761
Okay, so the next thing you have is a button?
Okay, so the next thing you have is a button?

546
00:39:13,761 --> 00:39:22,900
Yeah, we'll do a button type="submit" and this is going to be handled by the page.
Yeah, we'll do a button type="submit" and this is going to be handled by the page.

547
00:39:22,900 --> 00:39:25,409
-Okay -Button's gonna be a little different.
-Okay -Button's gonna be a little different.

548
00:39:25,409 --> 00:39:31,937
The reason that we're doing a button in an href is so you can see the difference between a link,and how links behave, and buttons.
The reason that we're doing a button in an href is so you can see the difference between a link,and how links behave, and buttons.

549
00:39:31,937 --> 00:39:34,177
A link is gonna navigate somewhere.
A link is gonna navigate somewhere.

550
00:39:34,177 --> 00:39:36,929
-Yep -And a button's gonna cause a post, right?
-Yep -And a button's gonna cause a post, right?

551
00:39:36,929 --> 00:39:42,375
So this will go and be handled by the delete handler.
So this will go and be handled by the delete handler.

552
00:39:42,950 --> 00:39:47,800
But we also need that route information, we need that id because we're gonna delete a particular customer.
But we also need that route information, we need that id because we're gonna delete a particular customer.

553
00:39:47,800 --> 00:39:51,009
-So you need the content ID, yep -Customer ID, exactly
-So you need the content ID, yep -Customer ID, exactly

554
00:39:52,275 --> 00:39:54,913
All right, and then none of this is hooked up.
All right, and then none of this is hooked up.

555
00:39:54,977 --> 00:40:01,275
So you mentioned something, voice of the people at home,about the button being a post.
So you mentioned something, voice of the people at home,about the button being a post.

556
00:40:01,700 --> 00:40:11,550
Yes, it is going to post back and then we're gonna need to handle that behavior differently than the Create page.
Yes, it is going to post back and then we're gonna need to handle that behavior differently than the Create page.

557
00:40:11,550 --> 00:40:13,250
So then I'll just put a link at the bottom there for Create.
So then I'll just put a link at the bottom there for Create.

558
00:40:13,975 --> 00:40:15,125
So I'm just gonna hit Refresh.
So I'm just gonna hit Refresh.

559
00:40:15,875 --> 00:40:18,725
So let's see if the Create- Here's our Create.
So let's see if the Create- Here's our Create.

560
00:40:21,450 --> 00:40:22,689
That still works.
That still works.

561
00:40:22,689 --> 00:40:25,825
-Okay -I hover over that.
-Okay -I hover over that.

562
00:40:26,125 --> 00:40:28,625
Nothing's happening because we don't have an edit.
Nothing's happening because we don't have an edit.

563
00:40:29,600 --> 00:40:33,505
We never made an edit page, and I hit Delete You should.
We never made an edit page, and I hit Delete You should.

564
00:40:33,505 --> 00:40:38,400
It's gonna crash cuz it's like I don't know what you're doing, right?
It's gonna crash cuz it's like I don't know what you're doing, right?

565
00:40:38,400 --> 00:40:43,125
It's just in the middle of something and it's confused cuz that's not what I asked it to do.
It's just in the middle of something and it's confused cuz that's not what I asked it to do.

566
00:40:44,125 --> 00:40:46,225
Okay, so we've got some fixing up to do.
Okay, so we've got some fixing up to do.

567
00:40:46,225 --> 00:40:51,460
-Let's try Delete first -Okay. All right, so let's go over here.
-Let's try Delete first -Okay. All right, so let's go over here.

568
00:40:51,460 --> 00:40:58,450
-We made an OnGet -Let's go and make an OnDelete.
-We made an OnGet -Let's go and make an OnDelete.

569
00:40:58,450 --> 00:41:08,932
-Okay -Same thing as before with an IActionResult, except now we're gonna say on and this is kinda weird, OnPostDelete.
-Okay -Same thing as before with an IActionResult, except now we're gonna say on and this is kinda weird, OnPostDelete.

570
00:41:09,764 --> 00:41:20,964
The verb delete is a real HTTP verb,but it's not really often used from a browser's perspective.
The verb delete is a real HTTP verb,but it's not really often used from a browser's perspective.

571
00:41:20,964 --> 00:41:25,700
It's usually done as it's piggybacked on post.
It's usually done as it's piggybacked on post.

572
00:41:25,700 --> 00:41:29,732
We use post to pass in basically all kinds of information.
We use post to pass in basically all kinds of information.

573
00:41:30,400 --> 00:41:34,980
Whenever we hit Submit on a form, we're posting that form.
Whenever we hit Submit on a form, we're posting that form.

574
00:41:34,980 --> 00:41:38,884
We're adding in, I think we said, page-handler delete.
We're adding in, I think we said, page-handler delete.

575
00:41:39,140 --> 00:41:43,492
So that is gonna be here, OnPostDelete.
So that is gonna be here, OnPostDelete.

576
00:41:44,388 --> 00:41:53,092
And now we're going to say,a customer, customer singular.
And now we're going to say,a customer, customer singular.

577
00:41:53,092 --> 00:41:56,484
And we'll go and get that customer out of the database.
And we'll go and get that customer out of the database.

578
00:41:57,550 --> 00:42:04,600
Before we delete it we gotta go and get it to make sure it's there,I say find, by that ID that got passed in.
Before we delete it we gotta go and get it to make sure it's there,I say find, by that ID that got passed in.

579
00:42:05,709 --> 00:42:10,314
So now we gotta check to see if that customer's null or not, cuz if it's null, then we don't even bother.
So now we gotta check to see if that customer's null or not, cuz if it's null, then we don't even bother.

580
00:42:10,634 --> 00:42:12,746
If it's not null, do something.
If it's not null, do something.

581
00:42:14,410 --> 00:42:17,354
And then we can go and Redirect.
And then we can go and Redirect.

582
00:42:17,674 --> 00:42:18,442
To a page.
To a page.

583
00:42:18,634 --> 00:42:20,362
To a page, exactly, thank you.
To a page, exactly, thank you.

584
00:42:20,490 --> 00:42:24,138
So here, we're gonna remove it from the database.
So here, we're gonna remove it from the database.

585
00:42:24,400 --> 00:42:32,983
And we are doing it in a memory database but it doesn't matter because if it was a regular database it would remove it for us, as well, that's what's nice about any framework.
And we are doing it in a memory database but it doesn't matter because if it was a regular database it would remove it for us, as well, that's what's nice about any framework.

586
00:42:33,495 --> 00:42:34,775
I'm not a very good typer.
I'm not a very good typer.

587
00:42:35,927 --> 00:42:43,543
So we remove the customer and then we go and we save those changes.
So we remove the customer and then we go and we save those changes.

588
00:42:46,935 --> 00:42:51,159
-Okay -And then I would expect it would then redirect to the page,the same page.
-Okay -And then I would expect it would then redirect to the page,the same page.

589
00:42:51,159 --> 00:42:56,598
Yes. And I would expect that it would disappear from that list because it's going to go back to the database and build the list again.
Yes. And I would expect that it would disappear from that list because it's going to go back to the database and build the list again.

590
00:42:57,150 --> 00:42:59,646
-Does that make sense? -It does, it sure does.
-Does that make sense? -It does, it sure does.

591
00:42:59,646 --> 00:43:01,182
I think that's what it will do.
I think that's what it will do.

592
00:43:03,038 --> 00:43:05,022
So we cross our fingers and hope that it works.
So we cross our fingers and hope that it works.

593
00:43:07,646 --> 00:43:08,926
And if it doesn't, we learn.
And if it doesn't, we learn.

594
00:43:10,334 --> 00:43:15,291
-Okay -That's not a good name.
-Okay -That's not a good name.

595
00:43:20,600 --> 00:43:22,050
All right, we're deleting you.
All right, we're deleting you.

596
00:43:22,050 --> 00:43:24,059
Okay, I'm fine with that.
Okay, I'm fine with that.

597
00:43:24,400 --> 00:43:27,536
-It does work the way you want -Yeah, it does work
-It does work the way you want -Yeah, it does work

598
00:43:27,536 --> 00:43:28,808
-Fire, fire, fire -Deal, deal, deal.
-Fire, fire, fire -Deal, deal, deal.

599
00:43:29,525 --> 00:43:32,700
-Fancy pants -But now if we edit it.
-Fancy pants -But now if we edit it.

600
00:43:32,700 --> 00:43:35,644
Doesn't work because Edit doesn't exist.
Doesn't work because Edit doesn't exist.

601
00:43:35,644 --> 00:43:36,796
And it is not there.
And it is not there.

602
00:43:36,796 --> 00:43:38,025
All right, so let's go and do edit, then.
All right, so let's go and do edit, then.

603
00:43:39,150 --> 00:43:43,196
So we'll do what you said before, add razor page.
So we'll do what you said before, add razor page.

604
00:43:44,860 --> 00:43:49,800
Call it Edit, now I know you like routing.
Call it Edit, now I know you like routing.

605
00:43:49,800 --> 00:43:52,604
Routing is one of your favorite things about ASP.NET.
Routing is one of your favorite things about ASP.NET.

606
00:43:52,604 --> 00:44:00,284
So this Edit page is gonna be the first time that we've ever had a page that took in information.
So this Edit page is gonna be the first time that we've ever had a page that took in information.

607
00:44:00,284 --> 00:44:03,548
-Okay -Where does that go to pass in the ID?
-Okay -Where does that go to pass in the ID?

608
00:44:04,124 --> 00:44:10,076
-So up there at page? -Right, quote quotes.
-So up there at page? -Right, quote quotes.

609
00:44:10,076 --> 00:44:11,932
Yeah, and curly brackets.
Yeah, and curly brackets.

610
00:44:12,450 --> 00:44:15,575
-Yeah -ID.
-Yeah -ID.

611
00:44:15,575 --> 00:44:16,919
I mean int.
I mean int.

612
00:44:16,919 --> 00:44:19,378
Okay so the ID is of type int.
Okay so the ID is of type int.

613
00:44:19,378 --> 00:44:21,042
Yes. That's the type hint.
Yes. That's the type hint.

614
00:44:21,675 --> 00:44:25,030
So this is saying edit slash 3.
So this is saying edit slash 3.

615
00:44:25,030 --> 00:44:27,782
So you'd see it in the browser,that's what it would look like.
So you'd see it in the browser,that's what it would look like.

616
00:44:27,782 --> 00:44:28,425
Okay.
Okay.

617
00:44:28,742 --> 00:44:36,125
We have our Edit model, and then here, at the top, we might have Edit, we could actually add a little bit of text here.
We have our Edit model, and then here, at the top, we might have Edit, we could actually add a little bit of text here.

618
00:44:36,125 --> 00:44:37,341
We could say Edit Customer.
We could say Edit Customer.

619
00:44:38,493 --> 00:44:41,373
And then we could say -Dash Model?
And then we could say -Dash Model?

620
00:44:41,373 --> 00:44:46,045
@Model.Customer, but again, we're not getting IntelliSense,why not?
@Model.Customer, but again, we're not getting IntelliSense,why not?

621
00:44:46,045 --> 00:44:49,693
Because the page model is different for each page.
Because the page model is different for each page.

622
00:44:49,693 --> 00:44:54,621
-Exactly -So let's go look at the one for Edit
-Exactly -So let's go look at the one for Edit

623
00:45:00,125 --> 00:45:01,789
So I'm gonna.
So I'm gonna.

624
00:45:01,789 --> 00:45:02,855
-You're gonna take, yeah -Borrow again
-You're gonna take, yeah -Borrow again

625
00:45:03,648 --> 00:45:13,440
Certainly I could make another class, a base class, that would pull that AppDBContext in so I wouldn't have to keep copy-pasting that because at some point the copy-pasting becomes tedious.
Certainly I could make another class, a base class, that would pull that AppDBContext in so I wouldn't have to keep copy-pasting that because at some point the copy-pasting becomes tedious.

626
00:45:15,875 --> 00:45:18,688
And you want to keep it dry, right.
And you want to keep it dry, right.

627
00:45:18,688 --> 00:45:20,224
Don't repeat yourself.
Don't repeat yourself.

628
00:45:21,632 --> 00:45:24,125
You probably want that to survive the journey right?
You probably want that to survive the journey right?

629
00:45:24,425 --> 00:45:24,925
Yeah.
Yeah.

630
00:45:24,925 --> 00:45:25,404
Okay.
Okay.

631
00:45:26,075 --> 00:45:31,168
So we want to survive the journey,with bindproperty, okay.
So we want to survive the journey,with bindproperty, okay.

632
00:45:32,875 --> 00:45:38,675
So I go back over to our page, and let's see if that worked.
So I go back over to our page, and let's see if that worked.

633
00:45:39,552 --> 00:45:40,832
And it did, that's nice.
And it did, that's nice.

634
00:45:40,832 --> 00:45:41,856
Yes, it did.
Yes, it did.

635
00:45:41,856 --> 00:45:51,200
So now we can say, we are Model.Customer.Id, so we can say, Edit Customer for, or whatever.
So now we can say, we are Model.Customer.Id, so we can say, Edit Customer for, or whatever.

636
00:45:52,925 --> 00:46:00,425
And then form, and then a form post, and there's some lots of cool ways to make your forms easier to write.
And then form, and then a form post, and there's some lots of cool ways to make your forms easier to write.

637
00:46:00,425 --> 00:46:06,179
If you find writing forms tedious, there's a really great way to write forms that is called Emmet.
If you find writing forms tedious, there's a really great way to write forms that is called Emmet.

638
00:46:07,325 --> 00:46:09,123
-What is Emmet? -You've never heard of Emmet?
-What is Emmet? -You've never heard of Emmet?

639
00:46:09,450 --> 00:46:14,122
E-m-m-e-t, it's like the name, the person's name Emmet.
E-m-m-e-t, it's like the name, the person's name Emmet.

640
00:46:14,122 --> 00:46:20,027
Okay. And it's a way of describing what you want like a feel like trt.
Okay. And it's a way of describing what you want like a feel like trt.

641
00:46:20,027 --> 00:46:30,091
TR TD times three and then you'd hit tab and then it would go and expand it, it's a way to write tags for HTML really really fast.
TR TD times three and then you'd hit tab and then it would go and expand it, it's a way to write tags for HTML really really fast.

642
00:46:30,091 --> 00:46:37,046
-Is it built in? -It's built into Visual Studio code but it is not built in to Visual Studio yet.
-Is it built in? -It's built into Visual Studio code but it is not built in to Visual Studio yet.

643
00:46:37,174 --> 00:46:41,270
-Okay -Notice how I got this here, soon as I said ASP net four.
-Okay -Notice how I got this here, soon as I said ASP net four.

644
00:46:41,270 --> 00:46:44,662
Yeah, it gave you Input four, rather.
Yeah, it gave you Input four, rather.

645
00:46:44,662 --> 00:46:46,774
It got that, this is really nice, right?
It got that, this is really nice, right?

646
00:46:46,838 --> 00:46:52,342
So I can go and fill out these forms really quickly and I don't have to worry about that's gonna happen on the server side.
So I can go and fill out these forms really quickly and I don't have to worry about that's gonna happen on the server side.

647
00:46:52,918 --> 00:46:58,294
Okay, so then we'll say a label, and this is a label also for.
Okay, so then we'll say a label, and this is a label also for.

648
00:46:58,294 --> 00:46:59,574
The customer.
The customer.

649
00:46:59,574 --> 00:47:10,518
Customer's name which is nice and then we'll say, give you another div, And then within there we'll have an input.
Customer's name which is nice and then we'll say, give you another div, And then within there we'll have an input.

650
00:47:12,700 --> 00:47:15,638
For Customer.Name.
For Customer.Name.

651
00:47:18,134 --> 00:47:19,650
And then you can do the validation again, right?
And then you can do the validation again, right?

652
00:47:19,650 --> 00:47:21,625
Yeah I'll do some, but I can do validation two different ways.
Yeah I'll do some, but I can do validation two different ways.

653
00:47:21,625 --> 00:47:27,736
I could do the validation summary or we can do it like this, which is nice.
I could do the validation summary or we can do it like this, which is nice.

654
00:47:28,525 --> 00:47:30,166
And what are the key differences?
And what are the key differences?

655
00:47:30,166 --> 00:47:32,854
This one is, you have total control of what it looks like.
This one is, you have total control of what it looks like.

656
00:47:32,854 --> 00:47:34,710
You can put it anywhere up or down.
You can put it anywhere up or down.

657
00:47:34,710 --> 00:47:37,846
Okay. And this is just a bulleted list that's a roll up.
Okay. And this is just a bulleted list that's a roll up.

658
00:47:37,846 --> 00:47:39,702
Okay. Of all of the stuff.
Okay. Of all of the stuff.

659
00:47:39,702 --> 00:47:42,262
Totally up to you how you wanna do things.
Totally up to you how you wanna do things.

660
00:47:44,182 --> 00:47:46,934
This is all inside of a form, right?
This is all inside of a form, right?

661
00:47:46,934 --> 00:47:48,150
So you want to save it, right?
So you want to save it, right?

662
00:47:48,150 --> 00:47:51,775
Yeah, we're going to need a save button.
Yeah, we're going to need a save button.

663
00:47:53,526 --> 00:47:58,150
So we'll put our button at the bottom,and it's just a regular old submit, nothing fancy about it.
So we'll put our button at the bottom,and it's just a regular old submit, nothing fancy about it.

664
00:47:59,800 --> 00:48:01,650
We're going to want to load this up and save it.
We're going to want to load this up and save it.

665
00:48:01,650 --> 00:48:02,475
And it'll say save.
And it'll say save.

666
00:48:02,875 --> 00:48:04,475
And have validation.
And have validation.

667
00:48:04,475 --> 00:48:14,225
We've done all that very nicely like this, and we just wanna confirm like you said on the backend that we do the right thing.
We've done all that very nicely like this, and we just wanna confirm like you said on the backend that we do the right thing.

668
00:48:14,725 --> 00:48:17,270
So on the get, actually let's do this.
So on the get, actually let's do this.

669
00:48:17,270 --> 00:48:20,598
Let's run it first and then we'll try it again because right now we haven't hooked anything up.
Let's run it first and then we'll try it again because right now we haven't hooked anything up.

670
00:48:20,598 --> 00:48:23,050
We haven't got it from the database we haven't updated from the database.
We haven't got it from the database we haven't updated from the database.

671
00:48:23,375 --> 00:48:25,925
But I would expect the links to at least work.
But I would expect the links to at least work.

672
00:48:27,150 --> 00:48:29,366
Cuz now there is an Edit page.
Cuz now there is an Edit page.

673
00:48:31,670 --> 00:48:33,846
If there's not, then maybe I forgot something.
If there's not, then maybe I forgot something.

674
00:48:34,294 --> 00:48:36,342
Okay, look in the corner there.
Okay, look in the corner there.

675
00:48:36,470 --> 00:48:39,798
-Okay -It's kind of hard for me to do that.
-Okay -It's kind of hard for me to do that.

676
00:48:39,798 --> 00:48:45,558
I can take a screenshot but I can't really take a screenshot.
I can take a screenshot but I can't really take a screenshot.

677
00:48:45,622 --> 00:48:48,502
-Let's do this -We'll take a snipping tool.
-Let's do this -We'll take a snipping tool.

678
00:48:49,526 --> 00:48:51,894
Give it a delay of two seconds.
Give it a delay of two seconds.

679
00:48:52,982 --> 00:48:55,478
You're that fast? I am.
You're that fast? I am.

680
00:48:59,638 --> 00:49:07,382
So Edit/1 right,so the route got built by the fact that it was in the Edit.
So Edit/1 right,so the route got built by the fact that it was in the Edit.

681
00:49:07,382 --> 00:49:09,878
And then you had added that ID at the top there.
And then you had added that ID at the top there.

682
00:49:09,878 --> 00:49:17,174
So this is nice because we didn't have to hard code what a link looked like.
So this is nice because we didn't have to hard code what a link looked like.

683
00:49:17,174 --> 00:49:18,326
That's really important.
That's really important.

684
00:49:18,326 --> 00:49:22,358
We said, make me a link that takes me here.
We said, make me a link that takes me here.

685
00:49:23,100 --> 00:49:26,522
We didn't say make me a link that looks like this.
We didn't say make me a link that looks like this.

686
00:49:27,670 --> 00:49:31,638
And if we changed our things later, then it would change for us, which is nice.
And if we changed our things later, then it would change for us, which is nice.

687
00:49:32,950 --> 00:49:37,142
So here,if I click on that, I assume it'll just do, yeah, nothing.
So here,if I click on that, I assume it'll just do, yeah, nothing.

688
00:49:37,850 --> 00:49:39,700
So it's like, blegh, I don't have anything there.
So it's like, blegh, I don't have anything there.

689
00:49:40,325 --> 00:49:47,050
It doesn't know about customer yet because we have the bind,but we never loaded the customers.
It doesn't know about customer yet because we have the bind,but we never loaded the customers.

690
00:49:48,275 --> 00:50:02,475
So let's go and do our stuff again, we're gonna have our action result and here we're gonna say OnGet, of course,int id, that's gonna get passed in automatically because of the way we set up our routes, that's nice.
So let's go and do our stuff again, we're gonna have our action result and here we're gonna say OnGet, of course,int id, that's gonna get passed in automatically because of the way we set up our routes, that's nice.

691
00:50:03,625 --> 00:50:14,710
By default, will just return to page, but here we'll say Customer, the one above Go and get it from the database.
By default, will just return to page, but here we'll say Customer, the one above Go and get it from the database.

692
00:50:15,375 --> 00:50:22,750
-And find it, okay -Yeah, so FindAsync, kind of a standard thing, you could pass in more complicated queries, and get it other ways.
-And find it, okay -Yeah, so FindAsync, kind of a standard thing, you could pass in more complicated queries, and get it other ways.

693
00:50:22,750 --> 00:50:24,566
If it's null, freak out.
If it's null, freak out.

694
00:50:25,400 --> 00:50:31,926
-Right? -Yeah. If (Customers == null),I don't know, let's put them back to index.
-Right? -Yeah. If (Customers == null),I don't know, let's put them back to index.

695
00:50:32,975 --> 00:50:34,486
It's Customer, right?
It's Customer, right?

696
00:50:34,550 --> 00:50:36,825
Yes, pardon me, Customer.
Yes, pardon me, Customer.

697
00:50:38,646 --> 00:50:54,390
Okay, RedirectToPage("/Index"); a lot of typing,but we don't wanna hide anything from you.
Okay, RedirectToPage("/Index"); a lot of typing,but we don't wanna hide anything from you.

698
00:50:54,454 --> 00:50:55,670
Keeping it 100.
Keeping it 100.

699
00:50:55,670 --> 00:51:05,398
We are absolutely keeping it 100,so this should that up and give us a form, with the customer in it.
We are absolutely keeping it 100,so this should that up and give us a form, with the customer in it.

700
00:51:06,806 --> 00:51:10,966
Let's see if it does, cuz we added that bind property,which you said, what did you call it?
Let's see if it does, cuz we added that bind property,which you said, what did you call it?

701
00:51:10,966 --> 00:51:11,664
Surviving the journey.
Surviving the journey.

702
00:51:11,664 --> 00:51:13,000
Surviving the journey.
Surviving the journey.

703
00:51:14,875 --> 00:51:16,929
You saw that interest movie really survive the journey.
You saw that interest movie really survive the journey.

704
00:51:16,929 --> 00:51:18,337
Don't tell me what happens at the end?
Don't tell me what happens at the end?

705
00:51:18,337 --> 00:51:19,810
-So I've been -I don't wanna know
-So I've been -I don't wanna know

706
00:51:19,810 --> 00:51:21,570
Okay, and then I hit Edit, and then it works.
Okay, and then I hit Edit, and then it works.

707
00:51:21,570 --> 00:51:22,825
-Exactly -Right.
-Exactly -Right.

708
00:51:22,825 --> 00:51:25,874
-So what happens if you change it around? -If I change it
-So what happens if you change it around? -If I change it

709
00:51:25,874 --> 00:51:30,610
probably nothing Right,cuz we don't have our post.
probably nothing Right,cuz we don't have our post.

710
00:51:30,610 --> 00:51:31,225
Exactly.
Exactly.

711
00:51:31,225 --> 00:51:33,050
Exactly, so we've got our get.
Exactly, so we've got our get.

712
00:51:34,834 --> 00:51:39,275
But we don't have our post.
But we don't have our post.

713
00:51:39,275 --> 00:51:40,616
You could kind of copy that.
You could kind of copy that.

714
00:51:41,768 --> 00:51:58,642
Yes, I think there's a way to actually link that whole thing quickly, but we'll say, OnPostAsync All right,the very end we will do that Redirect.
Yes, I think there's a way to actually link that whole thing quickly, but we'll say, OnPostAsync All right,the very end we will do that Redirect.

715
00:51:59,000 --> 00:52:01,266
-To the index page? -To the index page, exactly
-To the index page? -To the index page, exactly

716
00:52:03,950 --> 00:52:07,050
-Okay -What do we do?
-Okay -What do we do?

717
00:52:07,050 --> 00:52:09,458
Well, we've got that model state valid issue.
Well, we've got that model state valid issue.

718
00:52:09,458 --> 00:52:11,314
Yeah, so if not model.
Yeah, so if not model.

719
00:52:11,314 --> 00:52:15,922
Not ModelState.IsValid.
Not ModelState.IsValid.

720
00:52:15,986 --> 00:52:17,970
Yeah, we want it to return to the page.
Yeah, we want it to return to the page.

721
00:52:17,970 --> 00:52:23,474
-Okay -Aah, Page
-Okay -Aah, Page

722
00:52:23,474 --> 00:52:28,875
See, if you try to type too fast to impress people, and it just ends up making you look silly.
See, if you try to type too fast to impress people, and it just ends up making you look silly.

723
00:52:30,125 --> 00:52:31,538
Okay, now this one is an interesting one.
Okay, now this one is an interesting one.

724
00:52:31,538 --> 00:52:33,074
Cuz you want to attach it to the database.
Cuz you want to attach it to the database.

725
00:52:33,074 --> 00:52:37,700
Yeah, so what we're doing is,we're modifying something that's all ready in the database.
Yeah, so what we're doing is,we're modifying something that's all ready in the database.

726
00:52:38,225 --> 00:52:41,586
So what we're trying to do is take this customer that we are recurrently editing.
So what we're trying to do is take this customer that we are recurrently editing.

727
00:52:42,900 --> 00:52:44,425
So it's in a cart state.
So it's in a cart state.

728
00:52:44,425 --> 00:52:53,925
Attach that customer in the state of it in the database,we're going to mark that as Modified.
Attach that customer in the state of it in the database,we're going to mark that as Modified.

729
00:52:53,925 --> 00:52:55,000
And this bit here.
And this bit here.

730
00:52:55,275 --> 00:52:59,375
It shouldn't be there, yeah -Add the using statement, there we go.
It shouldn't be there, yeah -Add the using statement, there we go.

731
00:52:59,375 --> 00:53:01,050
And now it's turned blue, okay.
And now it's turned blue, okay.

732
00:53:01,925 --> 00:53:11,900
Now, we don't know if it's going to work, because someone else could be simultaneously editing at the same time.
Now, we don't know if it's going to work, because someone else could be simultaneously editing at the same time.

733
00:53:11,900 --> 00:53:14,025
Exactly, so you want to do a try and catch.
Exactly, so you want to do a try and catch.

734
00:53:14,025 --> 00:53:16,530
Can do a try, maybe it'll work, maybe it won't.
Can do a try, maybe it'll work, maybe it won't.

735
00:53:16,530 --> 00:53:24,875
And the exception that we're gonna catch for,is called aDbUpdateConcurrencyException.
And the exception that we're gonna catch for,is called aDbUpdateConcurrencyException.

736
00:53:25,275 --> 00:53:26,130
So just in case someone's doing-
So just in case someone's doing-

737
00:53:26,130 --> 00:53:27,922
-If someone's in there at the same time -Exactly what it says.
-If someone's in there at the same time -Exactly what it says.

738
00:53:27,922 --> 00:53:31,383
-Exactly what it is -Okay, so you're going to wait for changes?
-Exactly what it is -Okay, so you're going to wait for changes?

739
00:53:31,383 --> 00:53:38,675
Go on 'await' and say SaveChangesAsync, and presumably that'll work fine.
Go on 'await' and say SaveChangesAsync, and presumably that'll work fine.

740
00:53:39,200 --> 00:53:41,450
If it doesn't- We'll have to throw an exception?
If it doesn't- We'll have to throw an exception?

741
00:53:41,450 --> 00:53:50,027
Now there's different arguments about the right way to do this, but for now I'm gonna go and say, Customer, and this is kind of cool.
Now there's different arguments about the right way to do this, but for now I'm gonna go and say, Customer, and this is kind of cool.

742
00:53:50,411 --> 00:53:54,750
Customer.Id, see how I'm getting IntelliSense inside the string?
Customer.Id, see how I'm getting IntelliSense inside the string?

743
00:53:59,000 --> 00:54:04,047
We can do whatever we want to about that concurrency exception, maybe even pass it in as an inner exception.
We can do whatever we want to about that concurrency exception, maybe even pass it in as an inner exception.

744
00:54:04,047 --> 00:54:10,831
But the fact is, actually, that would be a good idea,we'll pass that in, along for the ride.
But the fact is, actually, that would be a good idea,we'll pass that in, along for the ride.

745
00:54:12,687 --> 00:54:16,591
We wanna give a message to somebody that bad stuff has happened.
We wanna give a message to somebody that bad stuff has happened.

746
00:54:17,807 --> 00:54:23,631
All right,that should be, I think we always gonna create only.
All right,that should be, I think we always gonna create only.

747
00:54:23,631 --> 00:54:26,383
-And we do -We've done the create.
-And we do -We've done the create.

748
00:54:27,599 --> 00:54:29,903
-Let's go see -I think the create was a post.
-Let's go see -I think the create was a post.

749
00:54:29,903 --> 00:54:33,359
-Yeah -The read is the for loop.
-Yeah -The read is the for loop.

750
00:54:34,127 --> 00:54:39,695
The delete was also a post, but with a delete sidecar,along for the ride.
The delete was also a post, but with a delete sidecar,along for the ride.

751
00:54:40,399 --> 00:54:48,591
-So, Create, Dan -Break points from before.
-So, Create, Dan -Break points from before.

752
00:54:48,719 --> 00:54:55,759
-Yeah. I will remove those -I think you still have, okay.
-Yeah. I will remove those -I think you still have, okay.

753
00:54:55,823 --> 00:54:57,231
Continue, we'll bump into them if we have more.
Continue, we'll bump into them if we have more.

754
00:54:57,231 --> 00:54:58,895
-Fancy pants -Beyonce.
-Fancy pants -Beyonce.

755
00:54:58,959 --> 00:55:06,703
-That's a good point -Edit
-That's a good point -Edit

756
00:55:08,687 --> 00:55:11,311
-Carter -Carter Knowles.
-Carter -Carter Knowles.

757
00:55:14,511 --> 00:55:17,150
-Yeah -Don't get it twisted.
-Yeah -Don't get it twisted.

758
00:55:17,450 --> 00:55:22,447
-Delete everyone else who is not worthy -So
-Delete everyone else who is not worthy -So

759
00:55:22,447 --> 00:55:25,071
-See, it works -It does work.
-See, it works -It does work.

760
00:55:25,650 --> 00:55:30,063
There you go, taking care of business, cool.
There you go, taking care of business, cool.

761
00:55:30,063 --> 00:55:34,223
-So, let's think about that -So, that's pretty sweet.
-So, let's think about that -So, that's pretty sweet.

762
00:55:34,223 --> 00:55:41,711
-It is -If we go back, and just kind of review particularly,this bit here we've got our edit.
-It is -If we go back, and just kind of review particularly,this bit here we've got our edit.

763
00:55:44,800 --> 00:55:47,471
With the route id where we did not see
With the route id where we did not see

764
00:55:47,535 --> 00:55:49,135
-Where are we reaching -out right now?
-Where are we reaching -out right now?

765
00:55:49,135 --> 00:55:50,863
I'm sorry this is index.
I'm sorry this is index.

766
00:55:50,863 --> 00:55:52,847
-Okay -Right?
-Okay -Right?

767
00:55:52,847 --> 00:55:54,975
So here we got an edit.
So here we got an edit.

768
00:55:56,815 --> 00:56:06,530
I wanna point out how it looks in the code, and then compare that to how it looks ultimately in the code, right?
I wanna point out how it looks in the code, and then compare that to how it looks ultimately in the code, right?

769
00:56:06,900 --> 00:56:11,075
When it makes it all the way back to the browser.
When it makes it all the way back to the browser.

770
00:56:13,314 --> 00:56:15,746
-See? -It's in.
-See? -It's in.

771
00:56:15,746 --> 00:56:20,065
So that came from, this seems like a little more.
So that came from, this seems like a little more.

772
00:56:20,065 --> 00:56:22,500
You might be asking yourself,why you don't just hard code that?
You might be asking yourself,why you don't just hard code that?

773
00:56:22,875 --> 00:56:26,150
But routes change, pages change, things get moved around..
But routes change, pages change, things get moved around..

774
00:56:26,650 --> 00:56:34,725
Now, this one is a little bit more interesting here,because you might have multiple buttons on the page that do different stuff.
Now, this one is a little bit more interesting here,because you might have multiple buttons on the page that do different stuff.

775
00:56:35,650 --> 00:56:37,450
So then, you can give them a handler name
So then, you can give them a handler name

776
00:56:39,225 --> 00:56:40,514
Right? I could have delete.
Right? I could have delete.

777
00:56:40,514 --> 00:56:43,778
I could have bold face Beyonce, I could have all caps
I could have bold face Beyonce, I could have all caps

778
00:56:43,842 --> 00:56:44,802
We could have whatever.
We could have whatever.

779
00:56:44,802 --> 00:56:49,026
You're not limited to one button.
You're not limited to one button.

780
00:56:50,725 --> 00:56:59,010
A submit button can have, you could have multiple submits,still passing numbers, like in this case id.
A submit button can have, you could have multiple submits,still passing numbers, like in this case id.

781
00:56:59,010 --> 00:57:01,954
-Yeah -And this is an ampersand.
-Yeah -And this is an ampersand.

782
00:57:01,954 --> 00:57:06,946
-Yeah -Multiple handlers, delete, promote whatever.
-Yeah -Multiple handlers, delete, promote whatever.

783
00:57:06,946 --> 00:57:08,162
-Save -Save exactly
-Save -Save exactly

784
00:57:08,162 --> 00:57:18,530
-Okay -And what's cool about that, is that then that word delete If we look at the behind is this word.
-Okay -And what's cool about that, is that then that word delete If we look at the behind is this word.

785
00:57:19,850 --> 00:57:27,362
So I think you could even go like on post "foo" async, or whatever, as long as it lines up because you're saying on post and then some handler.
So I think you could even go like on post "foo" async, or whatever, as long as it lines up because you're saying on post and then some handler.

786
00:57:27,362 --> 00:57:29,090
-Yes -That cool?
-Yes -That cool?

787
00:57:29,090 --> 00:57:37,800
That is cool. And the handler is literally you could say Let me stop our debugging here.
That is cool. And the handler is literally you could say Let me stop our debugging here.

788
00:57:42,978 --> 00:57:44,075
You gonna try the foo?
You gonna try the foo?

789
00:57:46,375 --> 00:57:48,098
Right I can do whatever, it doesn't matter.
Right I can do whatever, it doesn't matter.

790
00:57:48,098 --> 00:57:50,978
That word is totally up to you.
That word is totally up to you.

791
00:57:50,978 --> 00:57:53,410
So I don't need to test that.
So I don't need to test that.

792
00:57:54,370 --> 00:57:56,738
-You just trust me -You don't trust me?
-You just trust me -You don't trust me?

793
00:57:56,738 --> 00:57:58,466
-Yeah, sure -All right let's test it then.
-Yeah, sure -All right let's test it then.

794
00:57:58,466 --> 00:58:05,890
-Let's test it -That gives you a lot of flexibility with buttons, so I say foo right there.
-Let's test it -That gives you a lot of flexibility with buttons, so I say foo right there.

795
00:58:05,890 --> 00:58:09,154
-I go over here -We say foo.
-I go over here -We say foo.

796
00:58:09,975 --> 00:58:10,625
And there you go.
And there you go.

797
00:58:10,625 --> 00:58:12,275
So while that's loading? What were you gonna say?
So while that's loading? What were you gonna say?

798
00:58:14,400 --> 00:58:17,425
No, no, no, I trust you ish.
No, no, no, I trust you ish.

799
00:58:17,425 --> 00:58:18,512
-Trust you ish? -Yeah.
-Trust you ish? -Yeah.

800
00:58:19,350 --> 00:58:20,802
That's pretty good, I'll take that.
That's pretty good, I'll take that.

801
00:58:21,058 --> 00:58:26,498
Let's go and add people.
Let's go and add people.

802
00:58:29,826 --> 00:58:30,725
-Okay -That was foo.
-Okay -That was foo.

803
00:58:31,800 --> 00:58:33,410
How did f oo know it was delete?
How did f oo know it was delete?

804
00:58:34,178 --> 00:58:38,658
Because it doesn't matter that it was named Foo.
Because it doesn't matter that it was named Foo.

805
00:58:38,722 --> 00:58:40,386
It's just a handler name.
It's just a handler name.

806
00:58:41,218 --> 00:58:46,475
And if we confirm it Did I pass it?
And if we confirm it Did I pass it?

807
00:58:49,700 --> 00:58:51,675
-Nope -This is create, sorry.
-Nope -This is create, sorry.

808
00:58:55,170 --> 00:58:56,770
There you go there's a delete.
There you go there's a delete.

809
00:58:57,075 --> 00:58:59,700
Okay see it says handler equals foo.
Okay see it says handler equals foo.

810
00:58:59,700 --> 00:59:06,434
-Yes, okay, yes -And then, I just happened to name this handler foo also.
-Yes, okay, yes -And then, I just happened to name this handler foo also.

811
00:59:06,434 --> 00:59:12,770
-Yes, yeah -So the point is, it lined up.
-Yes, yeah -So the point is, it lined up.

812
00:59:12,770 --> 00:59:14,114
And that's how you can have unlimited verbs.
And that's how you can have unlimited verbs.

813
00:59:14,114 --> 00:59:17,506
And then at that point, it just did the thing and removed it from the database.
And then at that point, it just did the thing and removed it from the database.

814
00:59:17,900 --> 00:59:25,725
-Cool? -Cool. So,we saw lots of different handlers, like gets and posts, and custom handlers like delete.
-Cool? -Cool. So,we saw lots of different handlers, like gets and posts, and custom handlers like delete.

815
00:59:25,725 --> 00:59:34,600
-Yeah -We saw some tag helpers, that will generate buttons and links for us.
-Yeah -We saw some tag helpers, that will generate buttons and links for us.

816
00:59:35,025 --> 00:59:36,322
-We saw layout pages -We saw validation.
-We saw layout pages -We saw validation.

817
00:59:36,322 --> 00:59:39,842
We saw validation both summary and individual.
We saw validation both summary and individual.

818
00:59:40,875 --> 00:59:45,730
-And yeah -Yeah lots of little bit about routing and a little bit more detail.
-And yeah -Yeah lots of little bit about routing and a little bit more detail.

819
00:59:46,275 --> 00:59:50,444
We saw routing,and then specifically, actually one important thing we can point out about routing as well.
We saw routing,and then specifically, actually one important thing we can point out about routing as well.

820
00:59:50,750 --> 01:00:00,578
If I click edit Did we, I shut the app down again.
If I click edit Did we, I shut the app down again.

821
01:00:01,075 --> 01:00:05,175
You had said ID:int
You had said ID:int

822
01:00:05,175 --> 01:00:09,154
-Yes -Where int was a number, correct?
-Yes -Where int was a number, correct?

823
01:00:09,625 --> 01:00:11,025
It would be interesting.
It would be interesting.

824
01:00:11,700 --> 01:00:19,010
So just confirm that, if we put in Submit Query, edit, she is one.
So just confirm that, if we put in Submit Query, edit, she is one.

825
01:00:21,442 --> 01:00:24,322
Put in an ID that is not an int.
Put in an ID that is not an int.

826
01:00:24,322 --> 01:00:28,636
You should get a You simply get a 404,you don't get a 500.
You should get a You simply get a 404,you don't get a 500.

827
01:00:28,636 --> 01:00:29,275
It's not an error.
It's not an error.

828
01:00:29,950 --> 01:00:31,600
It's a route that doesn't exist.
It's a route that doesn't exist.

829
01:00:31,908 --> 01:00:33,525
We don't have an edit that takes a string.
We don't have an edit that takes a string.

830
01:00:34,350 --> 01:00:43,074
So that's another really,really important thing to point out about routing, and why that little bit up there was so significant?
So that's another really,really important thing to point out about routing, and why that little bit up there was so significant?

831
01:00:43,074 --> 01:00:51,500
And then soon, in the intermediate sections, we will learn a little bit more about web APIs, and url, and mixing and matching pages as well Yeah.
And then soon, in the intermediate sections, we will learn a little bit more about web APIs, and url, and mixing and matching pages as well Yeah.

832
01:00:51,500 --> 01:00:54,075
Can we take a break and come back with a little bit of logging?
Can we take a break and come back with a little bit of logging?

833
01:00:54,075 --> 01:00:55,227
Yes we will
Yes we will

